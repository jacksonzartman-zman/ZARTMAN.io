(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{503:(e,t,l)=>{"use strict";l.d(t,{SupplierQuoteMessageComposer:()=>c});var s=l(5155),a=l(2115),r=l(7650),n=l(926);let i=(0,n.createServerReference)("6064f372d80206b1b8c4dde03c7608515fcdbbfe80",n.callServer,void 0,n.findSourceMapURL,"postSupplierQuoteMessageAction");var o=l(7275);let d={success:!1,error:null};function c(e){let{quoteId:t,supplierEmail:l,disabled:n=!1}=e,o=(0,a.useRef)(null),c=(0,a.useRef)(null),[m,p]=(0,r.useFormState)(i,d);return(0,a.useEffect)(()=>{var e;m.success&&(null==(e=o.current)||e.reset(),c.current&&(c.current.value=""))},[m.success,m.messageId]),(0,s.jsxs)("form",{ref:o,action:p,className:"space-y-3",children:[(0,s.jsx)("input",{type:"hidden",name:"quote_id",value:t}),(0,s.jsx)("input",{type:"hidden",name:"identity_email",value:l}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{htmlFor:"supplier-quote-message-body",className:"text-sm font-medium text-slate-200",children:"Message"}),(0,s.jsx)("textarea",{id:"supplier-quote-message-body",name:"body",ref:c,rows:4,maxLength:2e3,disabled:n,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-blue-400 focus:outline-none disabled:opacity-60",placeholder:"Share build progress, questions, or risks with the Zartman team..."})]}),m.error&&(0,s.jsx)("p",{className:"text-sm text-red-400",role:"alert","aria-live":"polite",children:m.error}),(0,s.jsx)(u,{disabled:n})]})}function u(e){let{disabled:t}=e,{pending:l}=(0,r.useFormStatus)();return(0,s.jsx)("button",{type:"submit",disabled:l||t,className:"".concat(o.n4," ").concat(o.m.md," w-full sm:w-auto"),children:l?"Sending...":"Send update"})}},2734:(e,t,l)=>{"use strict";l.d(t,{SupplierBidForm:()=>c});var s=l(5155),a=l(2115),r=l(7650),n=l(7275),i=l(926);let o=(0,i.createServerReference)("60ac6854eb7ffe0919b51d279af03bbcfab9eb5047",i.callServer,void 0,i.findSourceMapURL,"submitSupplierBidAction"),d={success:!1,error:null,status:null};function c(e){var t,l;let{quoteId:n,supplierEmail:i,existingBid:c,isLocked:x}=e,b=(0,a.useRef)(null),[h,f]=(0,r.useFormState)(o,d);(0,a.useEffect)(()=>{if(h.success&&!x){var e;null==(e=b.current)||e.reset()}},[h.success,x]);let g=c?"Update bid":"Submit bid";return(0,s.jsxs)("form",{ref:b,action:f,className:"space-y-4",children:[(0,s.jsx)("input",{type:"hidden",name:"quote_id",value:n}),(0,s.jsx)("input",{type:"hidden",name:"supplier_email",value:i}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,s.jsx)(u,{label:"Unit price",name:"unit_price",type:"number",step:"0.01",placeholder:"15000",defaultValue:"number"==typeof(null==c?void 0:c.unit_price)?c.unit_price.toString():"string"==typeof(null==c?void 0:c.unit_price)?c.unit_price:void 0,disabled:x,prefix:"$"}),(0,s.jsx)(u,{label:"Currency",name:"currency",placeholder:"USD",defaultValue:null!=(t=null==c?void 0:c.currency)?t:"USD",disabled:x}),(0,s.jsx)(u,{label:"Lead time (days)",name:"lead_time_days",type:"number",placeholder:"14",defaultValue:"number"==typeof(null==c?void 0:c.lead_time_days)?c.lead_time_days.toString():void 0,disabled:x})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Notes"}),(0,s.jsx)("textarea",{name:"notes",defaultValue:null!=(l=null==c?void 0:c.notes)?l:"",rows:4,disabled:x,className:"mt-1 w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-blue-400 focus:outline-none disabled:opacity-60",placeholder:"Add scope details, payment terms, or anything the customer should know."})]}),h.error?(0,s.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:h.error}):null,h.success&&!h.error?(0,s.jsx)("p",{className:"text-sm text-emerald-300",role:"status",children:"Bid saved — we’ll notify the customer."}):null,(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsx)(m,{label:g,disabled:x}),(null==c?void 0:c.status)?(0,s.jsx)(p,{status:c.status}):null]})]})}function u(e){let{label:t,name:l,type:a="text",placeholder:r,defaultValue:n,disabled:i,step:o,prefix:d}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),(0,s.jsxs)("div",{className:"mt-1 flex items-center rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 focus-within:border-blue-400",children:[d?(0,s.jsx)("span",{className:"mr-1 text-slate-500",children:d}):null,(0,s.jsx)("input",{type:a,name:l,placeholder:r,defaultValue:n,disabled:i,step:o,className:"w-full bg-transparent text-sm text-slate-100 placeholder:text-slate-500 focus:outline-none"})]})]})}function m(e){let{label:t,disabled:l}=e,{pending:a}=(0,r.useFormStatus)();return(0,s.jsx)("button",{type:"submit",disabled:a||l,className:"".concat(n.n4," ").concat(n.m.md," ").concat(l?"opacity-60":""),children:a?"Saving...":t})}function p(e){var t;let{status:l}=e;return(0,s.jsxs)("span",{className:"inline-flex rounded-full border px-3 py-1 text-xs font-semibold ".concat(null!=(t=({accepted:"bg-emerald-500/20 text-emerald-200 border-emerald-500/30",pending:"bg-blue-500/10 text-blue-200 border-blue-500/30",declined:"bg-red-500/10 text-red-200 border-red-500/30",withdrawn:"bg-slate-500/10 text-slate-200 border-slate-500/30"})[l])?t:"bg-slate-500/10 text-slate-200 border-slate-500/30"),children:["Status: ",l]})}},5144:(e,t,l)=>{Promise.resolve().then(l.bind(l,9330)),Promise.resolve().then(l.bind(l,2734)),Promise.resolve().then(l.bind(l,503)),Promise.resolve().then(l.bind(l,8567)),Promise.resolve().then(l.bind(l,9867))},9330:(e,t,l)=>{"use strict";l.d(t,{PortalLoginPanel:()=>o});var s=l(5155),a=l(2115),r=l(63);let n=(0,l(5553).UU)("https://example.com","dummy",{auth:{persistSession:!0}}),i={customer:{title:"Sign in to the customer portal",description:"Use the email you shared with the Zartman team to receive your magic link.",accent:"text-emerald-300",cta:"Email me a link"},supplier:{title:"Sign in to the supplier portal",description:"We’ll email you a secure link so you can view RFQs and complete onboarding.",accent:"text-blue-300",cta:"Send link"}};function o(e){let{role:t,fallbackRedirect:l}=e,[o,d]=(0,a.useState)(""),[c,u]=(0,a.useState)("idle"),[m,p]=(0,a.useState)(null),x=(0,r.usePathname)(),b="string"==typeof x&&x.startsWith("/".concat(t))?x:l;async function h(e){if(e.preventDefault(),!n){p("Supabase client not configured. Check env vars."),u("error");return}let t=o.trim().toLowerCase();if(!t||!t.includes("@")){p("Enter a valid work email."),u("error");return}try{u("sending"),p(null);let e=window.location.origin,l=encodeURIComponent(b);await n.auth.signInWithOtp({email:t,options:{emailRedirectTo:"".concat(e,"/auth/callback?next=").concat(l)}}),u("sent")}catch(e){console.error("Portal login: failed to request magic link",e),p("We couldn’t send the link. Try again in a few seconds."),u("error")}}let f=i[t];return(0,s.jsxs)("section",{className:"mx-auto max-w-lg rounded-2xl border border-slate-900 bg-slate-950/50 p-6",children:[(0,s.jsxs)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] ".concat(f.accent),children:[t," portal"]}),(0,s.jsx)("h2",{className:"mt-2 text-xl font-semibold text-white",children:f.title}),(0,s.jsx)("p",{className:"mt-1 text-sm text-slate-400",children:f.description}),(0,s.jsxs)("form",{onSubmit:h,className:"mt-5 space-y-3",children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Work email"}),(0,s.jsx)("input",{type:"email",value:o,onChange:e=>d(e.target.value),className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-white focus:outline-none",placeholder:"you@company.com",required:!0}),(0,s.jsx)("button",{type:"submit",disabled:"sending"===c,className:"w-full rounded-full border border-slate-800 bg-white/90 px-4 py-2 text-sm font-semibold text-slate-950 transition hover:bg-white disabled:opacity-60",children:"sending"===c?"Sending...":f.cta}),"sent"===c?(0,s.jsx)("p",{className:"text-sm text-emerald-200",children:"Check your inbox for the magic link."}):null,m?(0,s.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:m}):null,(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:["You’ll land back on ",(0,s.jsx)("span",{className:"font-mono text-slate-300",children:b})," after clicking the link."]})]})]})}}},e=>{e.O(0,[324,264,441,255,358],()=>e(e.s=5144)),_N_E=e.O()}]);