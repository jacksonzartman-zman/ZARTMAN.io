(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[214],{63:(e,t,s)=>{"use strict";var l=s(7260);s.o(l,"usePathname")&&s.d(t,{usePathname:function(){return l.usePathname}}),s.o(l,"useRouter")&&s.d(t,{useRouter:function(){return l.useRouter}}),s.o(l,"useSearchParams")&&s.d(t,{useSearchParams:function(){return l.useSearchParams}})},652:(e,t,s)=>{"use strict";s.d(t,{PortalLoginPanel:()=>d});var l=s(5155),a=s(2115),r=s(63),n=s(926);let i=(0,n.createServerReference)("40242a63d6ba2881efa1dddbe0dc249de3b28a4d02",n.callServer,void 0,n.findSourceMapURL,"requestMagicLinkForEmail"),o={customer:{title:"Sign in to the customer portal",description:"Use the email you shared with the Zartman team to receive your magic link.",accent:"text-emerald-300",cta:"Email me a link"},supplier:{title:"Sign in to your supplier workspace",description:"We’ll email a one-time magic link to the address tied to your onboarding profile. Use that same inbox to access RFQs.",accent:"text-blue-300",cta:"Send magic link"}};function d(e){let{role:t,fallbackRedirect:s}=e,[n,d]=(0,a.useState)(""),[c,u]=(0,a.useState)("idle"),[m,p]=(0,a.useState)(null),[x,b]=(0,a.useState)(null),h=(0,r.usePathname)(),f="string"==typeof h&&h.startsWith("/".concat(t))?h:s;async function g(e){e.preventDefault();let s=n.trim().toLowerCase();if(!s||!s.includes("@")){p("supplier"===t?"Enter a business email that matches your onboarding profile.":"Enter a valid work email."),u("error");return}try{var l,a;u("sending"),p(null);let e=await i({role:t,email:s,nextPath:f});if(!e.success){u("error"),p(null!=(l=e.error)?l:"supplier"===t?"We couldn’t send the link. Check your connection and try again.":"We couldn’t send the link. Try again in a few seconds.");return}u("sent"),b(null!=(a=e.normalizedEmail)?a:s)}catch(e){console.error("Portal login: failed to request magic link",e),p("supplier"===t?"We couldn’t send the link. Check your connection and try again.":"We couldn’t send the link. Try again in a few seconds."),u("error")}}let y=o[t];return(0,l.jsxs)("section",{className:"mx-auto max-w-lg rounded-2xl border border-slate-900 bg-slate-950/50 p-6",children:[(0,l.jsxs)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] ".concat(y.accent),children:[t," portal"]}),(0,l.jsx)("h2",{className:"mt-2 text-xl font-semibold text-white",children:y.title}),(0,l.jsx)("p",{className:"mt-1 text-sm text-slate-400",children:y.description}),(0,l.jsxs)("form",{onSubmit:g,className:"mt-5 space-y-3",children:[(0,l.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Work email"}),(0,l.jsx)("input",{type:"email",value:n,onChange:e=>d(e.target.value),className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-white focus:outline-none",placeholder:"you@company.com",required:!0}),(0,l.jsx)("button",{type:"submit",disabled:"sending"===c,className:"w-full rounded-full border border-slate-800 bg-white/90 px-4 py-2 text-sm font-semibold text-slate-950 transition hover:bg-white disabled:opacity-60",children:"sending"===c?"Sending...":y.cta}),"sent"===c?(0,l.jsx)("p",{className:"text-sm text-emerald-200",children:"supplier"===t?(0,l.jsxs)(l.Fragment,{children:["Link sent to"," ",(0,l.jsx)("span",{className:"font-mono text-white",children:null!=x?x:n.trim().toLowerCase()})," ","– check your inbox."]}):"Check your inbox for the magic link."}):null,m?(0,l.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:m}):null,(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:["You’ll land back on ",(0,l.jsx)("span",{className:"font-mono text-slate-300",children:f})," after clicking the link."]})]})]})}},1007:(e,t,s)=>{"use strict";s.d(t,{SupplierQuoteMessageComposer:()=>c});var l=s(5155),a=s(2115),r=s(7650),n=s(926);let i=(0,n.createServerReference)("60dd6cfdd5eae8eab6bf35d210049863e0c5d4b517",n.callServer,void 0,n.findSourceMapURL,"postSupplierQuoteMessageAction");var o=s(7275);let d={success:!1,error:null};function c(e){let{quoteId:t,supplierEmail:s,disabled:n=!1}=e,o=(0,a.useRef)(null),c=(0,a.useRef)(null),[m,p]=(0,r.useFormState)(i,d);return(0,a.useEffect)(()=>{var e;m.success&&(null==(e=o.current)||e.reset(),c.current&&(c.current.value=""))},[m.success,m.messageId]),(0,l.jsxs)("form",{ref:o,action:p,className:"space-y-3",children:[(0,l.jsx)("input",{type:"hidden",name:"quote_id",value:t}),(0,l.jsx)("input",{type:"hidden",name:"identity_email",value:s}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{htmlFor:"supplier-quote-message-body",className:"text-sm font-medium text-slate-200",children:"Message"}),(0,l.jsx)("textarea",{id:"supplier-quote-message-body",name:"body",ref:c,rows:4,maxLength:2e3,disabled:n,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-blue-400 focus:outline-none disabled:opacity-60",placeholder:"Share build progress, questions, or risks with the Zartman team..."})]}),m.error&&(0,l.jsx)("p",{className:"text-sm text-red-400",role:"alert","aria-live":"polite",children:m.error}),(0,l.jsx)(u,{disabled:n})]})}function u(e){let{disabled:t}=e,{pending:s}=(0,r.useFormStatus)();return(0,l.jsx)("button",{type:"submit",disabled:s||t,className:"".concat(o.n4," ").concat(o.m.md," w-full sm:w-auto"),children:s?"Sending...":"Send update"})}},5144:(e,t,s)=>{Promise.resolve().then(s.bind(s,652)),Promise.resolve().then(s.bind(s,6992)),Promise.resolve().then(s.bind(s,1007)),Promise.resolve().then(s.bind(s,8567)),Promise.resolve().then(s.bind(s,9867))},6992:(e,t,s)=>{"use strict";s.d(t,{SupplierBidForm:()=>c});var l=s(5155),a=s(2115),r=s(7650),n=s(7275),i=s(926);let o=(0,i.createServerReference)("606e7d098dd2b1da150f4935ef35f157b9503672b7",i.callServer,void 0,i.findSourceMapURL,"submitSupplierBidAction"),d={success:!1,error:null,status:null};function c(e){var t,s;let{quoteId:n,supplierEmail:i,existingBid:c,isLocked:x}=e,b=(0,a.useRef)(null),[h,f]=(0,r.useFormState)(o,d);(0,a.useEffect)(()=>{if(h.success&&!x){var e;null==(e=b.current)||e.reset()}},[h.success,x]);let g=c?"Update bid":"Submit bid";return(0,l.jsxs)("form",{ref:b,action:f,className:"space-y-4",children:[(0,l.jsx)("input",{type:"hidden",name:"quote_id",value:n}),(0,l.jsx)("input",{type:"hidden",name:"supplier_email",value:i}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,l.jsx)(u,{label:"Unit price",name:"unit_price",type:"number",step:"0.01",placeholder:"15000",defaultValue:"number"==typeof(null==c?void 0:c.unit_price)?c.unit_price.toString():"string"==typeof(null==c?void 0:c.unit_price)?c.unit_price:void 0,disabled:x,prefix:"$"}),(0,l.jsx)(u,{label:"Currency",name:"currency",placeholder:"USD",defaultValue:null!=(t=null==c?void 0:c.currency)?t:"USD",disabled:x}),(0,l.jsx)(u,{label:"Lead time (days)",name:"lead_time_days",type:"number",placeholder:"14",defaultValue:"number"==typeof(null==c?void 0:c.lead_time_days)?c.lead_time_days.toString():void 0,disabled:x})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Notes & certifications"}),(0,l.jsx)("textarea",{name:"notes",defaultValue:null!=(s=null==c?void 0:c.notes)?s:"",rows:4,disabled:x,className:"mt-1 w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-blue-400 focus:outline-none disabled:opacity-60",placeholder:"Call out certifications, MOQ, inspection plans, or anything the customer should know."})]}),h.error?(0,l.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:h.error}):null,h.success&&!h.error?(0,l.jsx)("p",{className:"text-sm text-emerald-300",role:"status",children:"Bid saved — we’ll notify the customer."}):null,(0,l.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,l.jsx)(m,{label:g,disabled:x}),(null==c?void 0:c.status)?(0,l.jsx)(p,{status:c.status}):null]})]})}function u(e){let{label:t,name:s,type:a="text",placeholder:r,defaultValue:n,disabled:i,step:o,prefix:d}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:t}),(0,l.jsxs)("div",{className:"mt-1 flex items-center rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 focus-within:border-blue-400",children:[d?(0,l.jsx)("span",{className:"mr-1 text-slate-500",children:d}):null,(0,l.jsx)("input",{type:a,name:s,placeholder:r,defaultValue:n,disabled:i,step:o,className:"w-full bg-transparent text-sm text-slate-100 placeholder:text-slate-500 focus:outline-none"})]})]})}function m(e){let{label:t,disabled:s}=e,{pending:a}=(0,r.useFormStatus)();return(0,l.jsx)("button",{type:"submit",disabled:a||s,className:"".concat(n.n4," ").concat(n.m.md," ").concat(s?"opacity-60":""),children:a?"Saving...":t})}function p(e){var t;let{status:s}=e;return(0,l.jsxs)("span",{className:"inline-flex rounded-full border px-3 py-1 text-xs font-semibold ".concat(null!=(t=({accepted:"bg-emerald-500/20 text-emerald-200 border-emerald-500/30",pending:"bg-blue-500/10 text-blue-200 border-blue-500/30",declined:"bg-red-500/10 text-red-200 border-red-500/30",withdrawn:"bg-slate-500/10 text-slate-200 border-slate-500/30"})[s])?t:"bg-slate-500/10 text-slate-200 border-slate-500/30"),children:["Status: ",s]})}}},e=>{e.O(0,[264,441,255,358],()=>e(e.s=5144)),_N_E=e.O()}]);