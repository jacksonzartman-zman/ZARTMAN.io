(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[659],{3296:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2619,23)),Promise.resolve().then(a.bind(a,9330))},9330:(e,t,a)=>{"use strict";a.d(t,{PortalLoginPanel:()=>o});var l=a(5155),s=a(2115),n=a(63);let i=(0,a(5553).UU)("https://example.com","dummy",{auth:{persistSession:!0}}),r={customer:{title:"Sign in to the customer portal",description:"Use the email you shared with the Zartman team to receive your magic link.",accent:"text-emerald-300",cta:"Email me a link"},supplier:{title:"Sign in to the supplier portal",description:"We’ll email you a secure link so you can view RFQs and complete onboarding.",accent:"text-blue-300",cta:"Send link"}};function o(e){let{role:t,fallbackRedirect:a}=e,[o,c]=(0,s.useState)(""),[d,m]=(0,s.useState)("idle"),[u,p]=(0,s.useState)(null),x=(0,n.usePathname)(),h="string"==typeof x&&x.startsWith("/".concat(t))?x:a;async function b(e){if(e.preventDefault(),!i){p("Supabase client not configured. Check env vars."),m("error");return}let t=o.trim().toLowerCase();if(!t||!t.includes("@")){p("Enter a valid work email."),m("error");return}try{m("sending"),p(null);let e=window.location.origin,a=encodeURIComponent(h);await i.auth.signInWithOtp({email:t,options:{emailRedirectTo:"".concat(e,"/auth/callback?next=").concat(a)}}),m("sent")}catch(e){console.error("Portal login: failed to request magic link",e),p("We couldn’t send the link. Try again in a few seconds."),m("error")}}let g=r[t];return(0,l.jsxs)("section",{className:"mx-auto max-w-lg rounded-2xl border border-slate-900 bg-slate-950/50 p-6",children:[(0,l.jsxs)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] ".concat(g.accent),children:[t," portal"]}),(0,l.jsx)("h2",{className:"mt-2 text-xl font-semibold text-white",children:g.title}),(0,l.jsx)("p",{className:"mt-1 text-sm text-slate-400",children:g.description}),(0,l.jsxs)("form",{onSubmit:b,className:"mt-5 space-y-3",children:[(0,l.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Work email"}),(0,l.jsx)("input",{type:"email",value:o,onChange:e=>c(e.target.value),className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-white focus:outline-none",placeholder:"you@company.com",required:!0}),(0,l.jsx)("button",{type:"submit",disabled:"sending"===d,className:"w-full rounded-full border border-slate-800 bg-white/90 px-4 py-2 text-sm font-semibold text-slate-950 transition hover:bg-white disabled:opacity-60",children:"sending"===d?"Sending...":g.cta}),"sent"===d?(0,l.jsx)("p",{className:"text-sm text-emerald-200",children:"Check your inbox for the magic link."}):null,u?(0,l.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:u}):null,(0,l.jsxs)("p",{className:"text-xs text-slate-500",children:["You’ll land back on ",(0,l.jsx)("span",{className:"font-mono text-slate-300",children:h})," after clicking the link."]})]})]})}}},e=>{e.O(0,[619,324,441,255,358],()=>e(e.s=3296)),_N_E=e.O()}]);