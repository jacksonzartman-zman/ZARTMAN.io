(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[659],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},926:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return s.callServer},createServerReference:function(){return n.createServerReference},findSourceMapURL:function(){return l.findSourceMapURL}});let s=r(1209),l=r(5153),n=r(7197)},2233:(e,t,r)=>{"use strict";r.d(t,{PortalLoginPanel:()=>c});var s=r(5155),l=r(2115),n=r(63),a=r(926);let i=(0,a.createServerReference)("408cd5d58e8afbb5f4a90132b7d7a415a91d83f0e6",a.callServer,void 0,a.findSourceMapURL,"requestMagicLinkForEmail"),o={customer:{title:"Sign in to the customer portal",description:"Use the email you shared with the Zartman team to receive your magic link.",accent:"text-emerald-300",cta:"Email me a link"},supplier:{title:"Sign in to your supplier workspace",description:"We’ll email a one-time magic link to the address tied to your onboarding profile. Use that same inbox to access RFQs.",accent:"text-blue-300",cta:"Send magic link"}};function c(e){let{role:t,fallbackRedirect:r}=e,[a,c]=(0,l.useState)(""),[u,d]=(0,l.useState)("idle"),[m,x]=(0,l.useState)(null),[p,f]=(0,l.useState)(null),h=(0,n.usePathname)(),b="string"==typeof h&&h.startsWith("/".concat(t))?h:r;async function g(e){e.preventDefault();let r=a.trim().toLowerCase();if(!r||!r.includes("@")){x("supplier"===t?"Enter a business email that matches your onboarding profile.":"Enter a valid work email."),d("error");return}try{var s,l;d("sending"),x(null);let e=await i({role:t,email:r,nextPath:b});if(!e.success){d("error"),x(null!=(s=e.error)?s:"supplier"===t?"We couldn’t send the link. Check your connection and try again.":"We couldn’t send the link. Try again in a few seconds.");return}d("sent"),f(null!=(l=e.normalizedEmail)?l:r)}catch(e){console.error("Portal login: failed to request magic link",e),x("supplier"===t?"We couldn’t send the link. Check your connection and try again.":"We couldn’t send the link. Try again in a few seconds."),d("error")}}let v=o[t];return(0,s.jsxs)("section",{className:"mx-auto max-w-lg rounded-2xl border border-slate-900 bg-slate-950/50 p-6",children:[(0,s.jsxs)("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] ".concat(v.accent),children:[t," portal"]}),(0,s.jsx)("h2",{className:"mt-2 text-xl font-semibold text-white",children:v.title}),(0,s.jsx)("p",{className:"mt-1 text-sm text-slate-400",children:v.description}),(0,s.jsxs)("form",{onSubmit:g,className:"mt-5 space-y-3",children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Work email"}),(0,s.jsx)("input",{type:"email",value:a,onChange:e=>c(e.target.value),className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-white focus:outline-none",placeholder:"you@company.com",required:!0}),(0,s.jsx)("button",{type:"submit",disabled:"sending"===u,className:"w-full rounded-full border border-slate-800 bg-white/90 px-4 py-2 text-sm font-semibold text-slate-950 transition hover:bg-white disabled:opacity-60",children:"sending"===u?"Sending...":v.cta}),"sent"===u?(0,s.jsx)("p",{className:"text-sm text-emerald-200",children:"supplier"===t?(0,s.jsxs)(s.Fragment,{children:["Link sent to"," ",(0,s.jsx)("span",{className:"font-mono text-white",children:null!=p?p:a.trim().toLowerCase()})," ","– check your inbox."]}):"Check your inbox for the magic link."}):null,m?(0,s.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:m}):null,(0,s.jsxs)("p",{className:"text-xs text-slate-500",children:["You’ll land back on ",(0,s.jsx)("span",{className:"font-mono text-slate-300",children:b})," after clicking the link."]})]})]})}},2821:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=function(){for(var e,t,r=0,s="",l=arguments.length;r<l;r++)(e=arguments[r])&&(t=function e(t){var r,s,l="";if("string"==typeof t||"number"==typeof t)l+=t;else if("object"==typeof t)if(Array.isArray(t)){var n=t.length;for(r=0;r<n;r++)t[r]&&(s=e(t[r]))&&(l&&(l+=" "),l+=s)}else for(s in t)t[s]&&(l&&(l+=" "),l+=s);return l}(e))&&(s&&(s+=" "),s+=t);return s}},3037:(e,t,r)=>{Promise.resolve().then(r.bind(r,2233)),Promise.resolve().then(r.bind(r,8788))},7275:(e,t,r)=>{"use strict";r.d(t,{m:()=>n,n4:()=>a,tJ:()=>i});let s="inline-flex items-center justify-center rounded-full font-semibold transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 disabled:cursor-not-allowed disabled:opacity-60",l={md:"px-5 py-2 text-sm",sm:"px-4 py-1.5 text-xs"},n=l,a="".concat(s," ").concat(l.md," bg-emerald-400 text-slate-950 shadow-lift-sm hover:bg-emerald-300 focus-visible:outline-emerald-300"),i="".concat(s," ").concat(l.md," border border-emerald-400/60 bg-transparent text-emerald-200 hover:bg-emerald-400/10 focus-visible:outline-emerald-400")},8788:(e,t,r)=>{"use strict";r.d(t,{default:()=>x});var s=r(5155),l=r(2115),n=r(2619),a=r.n(n),i=r(63),o=r(2821),c=r(7275);let u={customer:"Customer workspace",supplier:"Supplier workspace"},d={customer:"border-emerald-400/40 text-emerald-200 bg-emerald-500/5",supplier:"border-blue-400/40 text-blue-200 bg-blue-500/5"},m={customer:[{label:"Dashboard",href:"/customer"},{label:"Quotes",href:"/customer/quotes"},{label:"Settings",href:"/customer/settings"}],supplier:[{label:"Dashboard",href:"/supplier"},{label:"RFQs",href:"/supplier/rfqs"},{label:"Settings",href:"/supplier/settings"}]};function x(e){var t;let{user:r,signOutAction:n}=e,x=null!=(t=(0,i.usePathname)())?t:"/",f=(0,l.useMemo)(()=>{var e;return(e=x).startsWith("/customer")?"customer":e.startsWith("/supplier")?"supplier":null},[x]),h=f?m[f]:[];return(0,s.jsx)("header",{className:"sticky top-0 z-40 border-b border-slate-900/70 bg-neutral-950/95 backdrop-blur",children:(0,s.jsxs)("div",{className:"mx-auto flex w-full max-w-page flex-col gap-3 px-4 py-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsxs)(a(),{href:"/",className:"flex items-center gap-3 text-base font-semibold text-ink transition-colors hover:text-ink-soft","aria-label":"Zartman workspace home",children:[(0,s.jsx)("span",{className:"flex h-9 w-9 items-center justify-center rounded-2xl border border-emerald-400/50 bg-emerald-400/10 text-sm font-bold uppercase tracking-wide text-emerald-200",children:"Z"}),(0,s.jsxs)("div",{className:"flex flex-col leading-tight",children:[(0,s.jsx)("span",{children:"Zartman"}),(0,s.jsx)("span",{className:"text-xs font-normal uppercase tracking-[0.35em] text-ink-muted",children:"workspace"})]})]}),r&&f?(0,s.jsx)("span",{className:(0,o.A)("inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold uppercase tracking-wide",d[f]),children:u[f]}):null]}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:r?(0,s.jsx)(p,{user:r,role:f,signOutAction:n}):(0,s.jsxs)("div",{className:"flex items-center gap-3 text-sm font-semibold text-ink-soft",children:[(0,s.jsx)(a(),{href:"/login",className:"rounded-full border border-transparent px-4 py-1.5 transition-colors hover:border-slate-800 hover:text-ink",children:"Log in"}),(0,s.jsx)(a(),{href:"/quote",className:c.n4,children:"Get quote"})]})})]}),r&&h.length>0?(0,s.jsx)("nav",{className:"flex flex-wrap items-center gap-2 text-sm font-medium text-slate-400",children:h.map(e=>{var t,r;let l=(t=x)===(r=e.href)||t.startsWith("".concat(r,"/"));return(0,s.jsx)(a(),{href:e.href,className:(0,o.A)("rounded-full px-3 py-1.5 transition-colors",l?"bg-slate-900 text-white":"text-slate-400 hover:text-white"),children:e.label},e.href)})}):null]})})}function p(e){var t,r,n;let{user:c,role:u,signOutAction:d}=e,[m,x]=(0,l.useState)(!1),p=(0,l.useRef)(null),f=(0,i.usePathname)();(0,l.useEffect)(()=>{function e(e){var t;(null==(t=p.current)?void 0:t.contains(e.target))||x(!1)}return m&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[m]),(0,l.useEffect)(()=>{x(!1)},[f]);let h=null!=(r=null!=(t=c.displayName)?t:c.email)?r:"Signed in user";return(0,s.jsxs)("div",{className:"relative",ref:p,children:[(0,s.jsxs)("button",{type:"button",onClick:()=>x(e=>!e),className:"inline-flex items-center gap-2 rounded-full border border-slate-800 bg-slate-950/50 px-4 py-1.5 text-sm font-semibold text-slate-200 transition hover:border-slate-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-emerald-300","aria-haspopup":"menu","aria-expanded":m,children:[(0,s.jsx)("span",{children:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:28;return e.length<=t?e:"".concat(e.slice(0,t-3),"...")}(h)}),(0,s.jsx)("svg",{className:(0,o.A)("h-4 w-4 transition-transform",m?"rotate-180":"rotate-0"),viewBox:"0 0 20 20",fill:"none","aria-hidden":"true",children:(0,s.jsx)("path",{d:"M5 7l5 5 5-5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]}),m?(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-64 rounded-2xl border border-slate-900 bg-slate-950/95 p-4 text-sm shadow-lg shadow-black/40",children:[(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Signed in as"}),(0,s.jsx)("p",{className:"mt-1 font-semibold text-white",children:null!=(n=c.displayName)?n:"Workspace user"}),c.email?(0,s.jsx)("p",{className:"text-xs text-slate-500",children:c.email}):null,(0,s.jsxs)("div",{className:"mt-4 flex flex-col gap-2",children:[(0,s.jsx)(a(),{href:"customer"===u?"/customer/settings":"supplier"===u?"/supplier/settings":"/account/settings",className:"rounded-full border border-slate-800 px-3 py-1.5 text-left text-sm font-semibold text-slate-100 transition hover:border-slate-700 hover:text-white",onClick:()=>x(!1),children:"Account settings"}),(0,s.jsx)("form",{action:d,children:(0,s.jsx)("button",{type:"submit",className:"w-full rounded-full bg-red-500/10 px-3 py-1.5 text-sm font-semibold text-red-200 transition hover:bg-red-500/20",children:"Log out"})})]})]}):null]})}}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=3037)),_N_E=e.O()}]);