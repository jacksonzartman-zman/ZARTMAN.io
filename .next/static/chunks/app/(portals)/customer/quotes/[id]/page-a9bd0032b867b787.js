(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[886],{63:(e,t,s)=>{"use strict";var r=s(7260);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},617:(e,t,s)=>{"use strict";s.d(t,{CustomerQuoteTrackingCard:()=>d});var r=s(5155),l=s(2821),a=s(8799);function d(e){let{events:t,className:s}=e,d=Array.isArray(t)&&t.length>0;return(0,r.jsxs)("section",{className:(0,l.A)(s,"space-y-3"),children:[(0,r.jsxs)("header",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"TIMELINE"}),(0,r.jsx)("h2",{className:"mt-1 text-lg font-semibold text-white",children:"Production milestones"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-slate-300",children:"Follow RFQ progress, supplier bids, and status changes for this quote."})]}),d?(0,r.jsx)("ol",{className:"mt-2 space-y-4 border-l border-slate-800 pl-5",children:t.map(e=>(0,r.jsxs)("li",{className:"relative pb-2 last:pb-0",children:[(0,r.jsx)("span",{className:"absolute -left-[6px] mt-1 h-3 w-3 rounded-full border-2 border-emerald-400/50 bg-emerald-400/10"}),(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-white",children:e.title}),(0,r.jsx)("p",{className:"text-[11px] text-slate-500",children:(0,a.r)(e.at,{includeTime:!0})}),e.description?(0,r.jsx)("p",{className:"text-xs text-slate-200",children:e.description}):null,e.actorLabel?(0,r.jsx)("p",{className:"text-[10px] uppercase tracking-wide text-slate-500",children:e.actorLabel}):null]})]},e.id))}):(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"We’ll show your RFQ and bid activity here as things progress."})]})}},2475:(e,t,s)=>{"use strict";s.d(t,{CustomerQuoteMessagesCard:()=>m});var r=s(5155),l=s(2115),a=s(7650),d=s(8799),o=s(7275),n=s(926);let i=(0,n.createServerReference)("70c75b98ba07f2a7dcdfa796b2e97b6fbb46a71c23",n.callServer,void 0,n.findSourceMapURL,"submitCustomerQuoteMessageAction"),c={ok:!0};function m(e){let{quoteId:t,messages:s,messagesUnavailable:d=!1,readOnly:o=!1}=e,n=(0,l.useRef)(null),m=(0,l.useRef)(null),p=(0,l.useMemo)(()=>i.bind(null,t),[t]),[b,h]=(0,a.useFormState)(p,c);(0,l.useEffect)(()=>{var e;b.ok&&b.message&&(null==(e=n.current)||e.reset(),m.current&&(m.current.value=""))},[b.ok,b.message]);let f=s.length>0;return(0,r.jsxs)("section",{className:"space-y-4 rounded-2xl border border-slate-900 bg-slate-950/40 p-4",children:[(0,r.jsxs)("header",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Messages"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Messages"}),(0,r.jsx)("p",{className:"text-sm text-slate-400",children:"Share clarifications and notes about this RFQ. Zartman.io will respond here."})]})]}),d?(0,r.jsx)("p",{className:"rounded-xl border border-yellow-500/30 bg-yellow-500/5 px-3 py-2 text-sm text-yellow-100",children:"Messages are temporarily unavailable. Refresh the page or try again later."}):null,(0,r.jsx)(u,{messages:s,hasMessages:f}),(0,r.jsxs)("div",{className:"space-y-3 border-t border-slate-900/60 pt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-slate-100",children:"Send a message"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"Shared with the Zartman.io team supporting this RFQ."})]}),o?(0,r.jsx)("p",{className:"rounded-xl border border-dashed border-slate-800/70 bg-black/30 px-3 py-2 text-xs text-slate-400",children:"Read-only preview. Remove the email override to reply as the customer."}):null,(0,r.jsx)(x,{ref:n,textareaRef:m,onSubmit:h,state:b,disabled:o||d})]})]})}function u(e){let{messages:t,hasMessages:s}=e;return s?(0,r.jsx)("ol",{className:"space-y-3",children:t.map(e=>{var t;let s="customer"===e.author_type?"You":"Zartman.io";return(0,r.jsxs)("li",{className:"rounded-2xl border border-slate-900/70 bg-slate-950/50 px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-400",children:[(0,r.jsx)("span",{className:"font-semibold text-slate-100",children:s}),(0,r.jsx)("span",{children:null!=(t=(0,d.r)(e.created_at,{includeTime:!0}))?t:"Just now"})]}),(0,r.jsx)("p",{className:"mt-2 whitespace-pre-wrap text-sm leading-relaxed text-slate-100",children:e.body})]},e.id)})}):(0,r.jsx)("p",{className:"rounded-2xl border border-dashed border-slate-800/70 bg-black/30 px-4 py-4 text-sm text-slate-400",children:"No messages yet. Use this space to share clarifications or notes about this RFQ."})}let x=(0,l.forwardRef)((e,t)=>{var s;let{onSubmit:l,state:a,disabled:d=!1,textareaRef:o}=e,n=null==(s=a.fieldErrors)?void 0:s.body,i=a.ok&&!!a.message;return(0,r.jsxs)("form",{ref:t,action:l,className:"space-y-3",children:[i?(0,r.jsx)("p",{className:"rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-100",children:a.message}):null,!a.ok&&a.error?(0,r.jsx)("p",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:a.error}):null,(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"customer-message-body",className:"text-sm font-medium text-slate-200",children:"Message"}),(0,r.jsx)("textarea",{id:"customer-message-body",name:"body",ref:o,rows:4,maxLength:2e3,disabled:d,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60",placeholder:"Share files, timing updates, or questions for the Zartman team..."}),n?(0,r.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:n}):null]}),(0,r.jsx)(p,{disabled:d})]})});function p(e){let{disabled:t}=e,{pending:s}=(0,a.useFormStatus)();return(0,r.jsx)("button",{type:"submit",disabled:s||t,className:"".concat(o.n4," ").concat(o.m.md," w-full sm:w-auto"),children:s?"Sending...":"Send message"})}x.displayName="CustomerMessageComposerForm"},4171:(e,t,s)=>{"use strict";s.d(t,{CustomerQuoteProjectCard:()=>m});var r=s(5155),l=s(2115),a=s(7650),d=s(7275),o=s(926);let n=(0,o.createServerReference)("70d503454268c2c9ec220924c93a476da45dd425ff",o.callServer,void 0,o.findSourceMapURL,"submitCustomerQuoteProjectAction");var i=s(8799);let c={ok:!0};function m(e){var t,s,d,o,m;let{quoteId:p,project:b,readOnly:h=!1,projectUnavailable:f=!1}=e,[g,j]=(0,l.useState)(!1),y=(0,l.useMemo)(()=>n.bind(null,p),[p]),[N,v]=(0,a.useFormState)(y,c),w=(0,l.useMemo)(()=>(function(e){var t,s,r,l,a;let d=null!=e?e:c;return{ok:d.ok,message:null!=(l=d.message)?l:"",error:null!=(a=d.error)?a:"",fieldErrors:{poNumber:null==(t=d.fieldErrors)?void 0:t.poNumber,targetShipDate:null==(s=d.fieldErrors)?void 0:s.targetShipDate,notes:null==(r=d.fieldErrors)?void 0:r.notes}}})(N),[N]),S=(null==b?void 0:b.target_ship_date)?b.target_ship_date.slice(0,10):"",k=(null==b?void 0:b.target_ship_date)?null!=(t=(0,i.r)(b.target_ship_date))?t:b.target_ship_date:null,_=null!=(s=null==b?void 0:b.notes)?s:"",F=!b&&!f,R=g&&w.ok&&!!w.message,P=g&&!w.ok&&!!w.error,C=g&&!w.ok,E=h||f;return(0,r.jsxs)("section",{className:"space-y-4 rounded-2xl border border-slate-900 bg-slate-950/40 p-4",children:[(0,r.jsxs)("header",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-emerald-300",children:"Project kickoff"}),(0,r.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Next steps for this RFQ"}),(0,r.jsx)("p",{className:"text-sm text-slate-300",children:"Share your PO number and target ship date so we can kick off production."})]}),f?(0,r.jsx)("p",{className:"rounded-xl border border-yellow-500/30 bg-yellow-500/10 px-3 py-2 text-sm text-yellow-100",children:"Project details are temporarily unavailable."}):null,(0,r.jsxs)("dl",{className:"grid gap-3 text-sm text-slate-200 sm:grid-cols-2",children:[(0,r.jsx)(u,{label:"PO number",value:null!=(d=null==b?void 0:b.po_number)?d:null,placeholder:"Pending"}),(0,r.jsx)(u,{label:"Target ship date",value:k,placeholder:"Not set"}),(0,r.jsx)(u,{label:"Kickoff notes",value:null!=(o=null==b?void 0:b.notes)?o:null,placeholder:"No kickoff notes yet.",multiline:!0,className:"sm:col-span-2"})]}),h?(0,r.jsx)("p",{className:"rounded-xl border border-dashed border-slate-800/70 bg-black/40 px-3 py-2 text-xs text-slate-400",children:"Read-only preview. Switch back to your primary email to edit project details."}):(0,r.jsxs)("form",{action:e=>(j(!0),v(e)),className:"space-y-3",children:[F?(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"No project kickoff details saved yet. Add your PO number, target ship date, and any handoff notes when you are ready."}):null,R&&w.message?(0,r.jsx)("p",{className:"rounded-xl border border-emerald-500/30 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-100",children:w.message}):null,P&&w.error?(0,r.jsx)("p",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:w.error}):null,(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"customer-project-po",className:"text-sm font-medium text-slate-200",children:"Purchase order number"}),(0,r.jsx)("input",{id:"customer-project-po",name:"poNumber",type:"text",maxLength:100,defaultValue:null!=(m=null==b?void 0:b.po_number)?m:"",disabled:E,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60",placeholder:"PO-12345"}),C&&w.fieldErrors.poNumber?(0,r.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:w.fieldErrors.poNumber}):null]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"customer-project-target-date",className:"text-sm font-medium text-slate-200",children:"Target ship date"}),(0,r.jsx)("input",{id:"customer-project-target-date",name:"targetShipDate",type:"date",defaultValue:S,disabled:E,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60"}),C&&w.fieldErrors.targetShipDate?(0,r.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:w.fieldErrors.targetShipDate}):null]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"customer-project-notes",className:"text-sm font-medium text-slate-200",children:"Kickoff notes"}),(0,r.jsx)("textarea",{id:"customer-project-notes",name:"notes",rows:4,defaultValue:_,maxLength:2e3,disabled:E,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60",placeholder:"Share packaging, address, or special handling notes."}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"Shared with your Zartman team and the winning supplier."}),C&&w.fieldErrors.notes?(0,r.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:w.fieldErrors.notes}):null]}),(0,r.jsx)(x,{disabled:E})]})]})}function u(e){let{label:t,value:s,placeholder:l="—",multiline:a=!1,className:d=""}=e,o="string"==typeof s&&s.trim().length>0?s:l,n=[a?"whitespace-pre-line text-sm font-normal":"font-medium","text-slate-100"].join(" ");return(0,r.jsxs)("div",{className:"rounded-xl border border-slate-900/60 bg-slate-950/30 px-3 py-2 ".concat(d).trim(),children:[(0,r.jsx)("dt",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:t}),(0,r.jsx)("dd",{className:n,children:o})]})}function x(e){let{disabled:t}=e,{pending:s}=(0,a.useFormStatus)();return(0,r.jsx)("button",{type:"submit",disabled:s||t,className:"".concat(d.n4," ").concat(d.m.md," w-full sm:w-auto"),children:s?"Saving...":"Save project details"})}},5621:(e,t,s)=>{"use strict";s.d(t,{CustomerBidSelectionCard:()=>x});var r=s(5155),l=s(2821),a=s(2115),d=s(7650),o=s(63),n=s(7344),i=s(8799),c=s(926);let m=(0,c.createServerReference)("70b98ba0ff87f37c8e28b2768e219bdc2d4dd7a96d",c.callServer,void 0,c.findSourceMapURL,"submitCustomerSelectWinningBidAction"),u={ok:!0,message:""};function x(e){let{quoteId:t,bids:s,canSelectWinner:c,disableReason:x,winningBidId:b,winningBidSelectedAt:h,quoteWon:f}=e,g=(0,o.useRouter)(),j=m.bind(null,t),[y,N]=(0,d.useFormState)(j,u),v=y.ok?y.message:"",w=y.ok?"":y.error;(0,a.useEffect)(()=>{v&&g.refresh()},[g,v]);let S=h?(0,i.r)(h,{includeTime:!0}):null,k=c&&s.length>0;return(0,r.jsxs)("div",{className:"mt-5 space-y-4",children:[f?(0,r.jsxs)("div",{className:"rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-100",children:["Winning supplier selected"," ",S?"on ".concat(S):"successfully","."]}):null,w?(0,r.jsx)("p",{className:"rounded-xl border border-red-500/40 bg-red-500/5 px-4 py-3 text-sm text-red-200",role:"alert",children:w}):null,v?(0,r.jsx)("p",{className:"rounded-xl border border-emerald-500/40 bg-emerald-500/5 px-4 py-3 text-sm text-emerald-100",children:v}):null,!k&&x?(0,r.jsx)("p",{className:"rounded-xl border border-slate-800 bg-slate-950/60 px-4 py-2 text-xs text-slate-400",children:x}):null,(0,r.jsx)("div",{className:"space-y-3",children:s.map((e,t)=>{var s;let a=(0,n.v)(e.amount,null!=(s=e.currency)?s:void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),d="number"==typeof e.lead_time_days&&Number.isFinite(e.lead_time_days)?"".concat(e.lead_time_days," day").concat(1===e.lead_time_days?"":"s"):"Lead time pending",o=(0,i.r)(e.created_at,{includeTime:!0}),c=function(e){switch("string"==typeof e?e.trim().toLowerCase():""){case"won":return"Won";case"lost":return"Lost";case"revised":return"Revised";case"withdrawn":return"Withdrawn";case"accepted":return"Accepted";case"declined":return"Declined";default:return"Submitted"}}(e.status),m=function(e){let t="string"==typeof e?e.trim().toLowerCase():"";return"won"===t?"border-emerald-400/50 bg-emerald-500/10 text-emerald-100":"lost"===t||"declined"===t?"border-slate-700 bg-transparent text-slate-300":"withdrawn"===t?"border-amber-400/50 bg-amber-500/10 text-amber-100":"border-slate-800 bg-slate-900/40 text-slate-200"}(e.status),u=e.id===b||"string"==typeof e.status&&"won"===e.status.trim().toLowerCase();return(0,r.jsxs)("article",{className:(0,l.A)("rounded-2xl border px-4 py-4 shadow-sm transition",u?"border-emerald-500/60 bg-emerald-500/5":"border-slate-900/60 bg-slate-950/40 hover:border-slate-700"),children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.18em] text-slate-500",children:"Supplier ".concat(t+1)}),(0,r.jsx)("p",{className:"text-xl font-semibold text-white",children:a}),(0,r.jsxs)("p",{className:"text-sm text-slate-300",children:[d," • Submitted ",o]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsxs)("span",{className:(0,l.A)("rounded-full border px-3 py-1 text-xs font-semibold",m),children:["Status: ",c]}),u?(0,r.jsx)("span",{className:"rounded-full border border-emerald-400/50 bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-100",children:"Winner"}):null]})]}),k&&!u?(0,r.jsx)(p,{bidId:e.id,action:N}):null]},e.id)})})]})}function p(e){let{bidId:t,action:s}=e,{pending:l}=(0,d.useFormStatus)();return(0,r.jsxs)("form",{action:s,className:"mt-3",children:[(0,r.jsx)("input",{type:"hidden",name:"bidId",value:t}),(0,r.jsx)("button",{type:"submit",disabled:l,className:"inline-flex items-center rounded-full border border-emerald-400/50 bg-emerald-500/10 px-4 py-1.5 text-sm font-semibold text-emerald-100 transition hover:bg-emerald-500/20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-emerald-400 disabled:cursor-not-allowed disabled:opacity-60",children:l?"Selecting...":"Select winner"})]})}},7344:(e,t,s)=>{"use strict";function r(e,t,s){var r,l;if("number"!=typeof e||Number.isNaN(e))return"—";let a=(null!=t?t:"USD").toUpperCase(),d=null!=(r=null==s?void 0:s.maximumFractionDigits)?r:0,o=null!=(l=null==s?void 0:s.minimumFractionDigits)?l:d;try{return new Intl.NumberFormat("en-US",{style:"currency",currency:a,minimumFractionDigits:o,maximumFractionDigits:d}).format(e)}catch(s){let t=Math.max(o,d);return"".concat(a," ").concat(e.toFixed(t))}}s.d(t,{v:()=>r})},9715:(e,t,s)=>{Promise.resolve().then(s.bind(s,5621)),Promise.resolve().then(s.bind(s,2475)),Promise.resolve().then(s.bind(s,4171)),Promise.resolve().then(s.bind(s,617)),Promise.resolve().then(s.bind(s,8567)),Promise.resolve().then(s.bind(s,9867))}},e=>{e.O(0,[299,441,255,358],()=>e(e.s=9715)),_N_E=e.O()}]);