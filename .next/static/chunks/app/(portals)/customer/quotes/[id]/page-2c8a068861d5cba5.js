(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3886],{422:(e,s,t)=>{"use strict";t.d(s,{CustomerQuoteProjectCard:()=>m});var r=t(5155),l=t(2115),a=t(7650),d=t(7275),o=t(926);let n=(0,o.createServerReference)("70ed57011c9167a0fec566ecb7de502ce759da8701",o.callServer,void 0,o.findSourceMapURL,"submitCustomerQuoteProjectAction");var i=t(8799);let c={ok:!0};function m(e){var s,t,d,o,m;let{quoteId:p,project:h,readOnly:b=!1,projectUnavailable:g=!1}=e,[f,j]=(0,l.useState)(!1),N=(0,l.useMemo)(()=>n.bind(null,p),[p]),[y,v]=(0,a.useFormState)(N,c),w=(0,l.useMemo)(()=>(function(e){var s,t,r,l,a;let d=null!=e?e:c;return{ok:d.ok,message:null!=(l=d.message)?l:"",error:null!=(a=d.error)?a:"",fieldErrors:{poNumber:null==(s=d.fieldErrors)?void 0:s.poNumber,targetShipDate:null==(t=d.fieldErrors)?void 0:t.targetShipDate,notes:null==(r=d.fieldErrors)?void 0:r.notes}}})(y),[y]),k=(null==h?void 0:h.target_ship_date)?h.target_ship_date.slice(0,10):"",S=(null==h?void 0:h.target_ship_date)?null!=(s=(0,i.r)(h.target_ship_date))?s:h.target_ship_date:null,_=null!=(t=null==h?void 0:h.notes)?t:"",R=!h&&!g,E=f&&w.ok&&!!w.message,F=f&&!w.ok&&!!w.error,P=f&&!w.ok,M=b||g;return(0,r.jsxs)("section",{className:"space-y-4 rounded-2xl border border-slate-900 bg-slate-950/40 p-4",children:[(0,r.jsxs)("header",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Project kickoff"}),(0,r.jsx)("h2",{className:"text-lg font-semibold text-white",children:"PO details & target dates"}),(0,r.jsx)("p",{className:"text-sm text-slate-300",children:"Share your PO number, target ship date, and kickoff notes once this RFQ is awarded."})]}),g?(0,r.jsx)("p",{className:"rounded-xl border border-yellow-500/30 bg-yellow-500/10 px-3 py-2 text-sm text-yellow-100",children:"Project details are temporarily unavailable."}):null,(0,r.jsxs)("dl",{className:"grid gap-3 text-sm text-slate-200 sm:grid-cols-2",children:[(0,r.jsx)(x,{label:"PO number",value:null!=(d=null==h?void 0:h.po_number)?d:null,placeholder:"Pending"}),(0,r.jsx)(x,{label:"Target ship date",value:S,placeholder:"Not set"}),(0,r.jsx)(x,{label:"Kickoff notes",value:null!=(o=null==h?void 0:h.notes)?o:null,placeholder:"No kickoff notes yet.",multiline:!0,className:"sm:col-span-2"})]}),b?(0,r.jsx)("p",{className:"rounded-xl border border-dashed border-slate-800/70 bg-black/40 px-3 py-2 text-xs text-slate-400",children:"Read-only preview. Switch back to your primary email to edit project details."}):(0,r.jsxs)("form",{action:e=>(j(!0),v(e)),className:"space-y-3",children:[R?(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"No project kickoff details saved yet. Add your PO number, target ship date, and any handoff notes when you are ready."}):null,E&&w.message?(0,r.jsx)("p",{className:"rounded-xl border border-emerald-500/30 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-100",children:w.message}):null,F&&w.error?(0,r.jsx)("p",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:w.error}):null,(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"customer-project-po",className:"text-sm font-medium text-slate-200",children:"Purchase order number"}),(0,r.jsx)("input",{id:"customer-project-po",name:"poNumber",type:"text",maxLength:100,defaultValue:null!=(m=null==h?void 0:h.po_number)?m:"",disabled:M,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60",placeholder:"PO-12345"}),P&&w.fieldErrors.poNumber?(0,r.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:w.fieldErrors.poNumber}):null]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"customer-project-target-date",className:"text-sm font-medium text-slate-200",children:"Target ship date"}),(0,r.jsx)("input",{id:"customer-project-target-date",name:"targetShipDate",type:"date",defaultValue:k,disabled:M,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60"}),P&&w.fieldErrors.targetShipDate?(0,r.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:w.fieldErrors.targetShipDate}):null]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"customer-project-notes",className:"text-sm font-medium text-slate-200",children:"Kickoff notes"}),(0,r.jsx)("textarea",{id:"customer-project-notes",name:"notes",rows:4,defaultValue:_,maxLength:2e3,disabled:M,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60",placeholder:"Share packaging, address, or special handling notes."}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"Shared with your Zartman team and the winning supplier."}),P&&w.fieldErrors.notes?(0,r.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:w.fieldErrors.notes}):null]}),(0,r.jsx)(u,{disabled:M})]})]})}function x(e){let{label:s,value:t,placeholder:l="—",multiline:a=!1,className:d=""}=e,o="string"==typeof t&&t.trim().length>0?t:l,n=[a?"whitespace-pre-line text-sm font-normal":"font-medium","text-slate-100"].join(" ");return(0,r.jsxs)("div",{className:"rounded-xl border border-slate-900/60 bg-slate-950/30 px-3 py-2 ".concat(d).trim(),children:[(0,r.jsx)("dt",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:s}),(0,r.jsx)("dd",{className:n,children:o})]})}function u(e){let{disabled:s}=e,{pending:t}=(0,a.useFormStatus)();return(0,r.jsx)("button",{type:"submit",disabled:t||s,className:"".concat(d.n4," ").concat(d.m.md," w-full sm:w-auto"),children:t?"Saving...":"Save project details"})}},617:(e,s,t)=>{"use strict";t.d(s,{CustomerQuoteTrackingCard:()=>d});var r=t(5155),l=t(2821),a=t(8799);function d(e){let{events:s,className:t}=e,d=Array.isArray(s)&&s.length>0;return(0,r.jsxs)("section",{className:(0,l.A)(t,"space-y-3"),children:[(0,r.jsxs)("header",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"TIMELINE"}),(0,r.jsx)("h2",{className:"mt-1 text-lg font-semibold text-white",children:"Production milestones"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-slate-300",children:"Follow RFQ progress, supplier bids, and status changes for this quote."})]}),d?(0,r.jsx)("ol",{className:"mt-2 space-y-4 border-l border-slate-800 pl-5",children:s.map(e=>(0,r.jsxs)("li",{className:"relative pb-2 last:pb-0",children:[(0,r.jsx)("span",{className:"absolute -left-[6px] mt-1 h-3 w-3 rounded-full border-2 border-emerald-400/50 bg-emerald-400/10"}),(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-white",children:e.title}),(0,r.jsx)("p",{className:"text-[11px] text-slate-500",children:(0,a.r)(e.at,{includeTime:!0})}),e.description?(0,r.jsx)("p",{className:"text-xs text-slate-200",children:e.description}):null,e.actorLabel?(0,r.jsx)("p",{className:"text-[10px] uppercase tracking-wide text-slate-500",children:e.actorLabel}):null]})]},e.id))}):(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"We’ll show your RFQ and bid activity here as things progress."})]})}},8265:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2619,23)),Promise.resolve().then(t.bind(t,9768)),Promise.resolve().then(t.bind(t,422)),Promise.resolve().then(t.bind(t,617)),Promise.resolve().then(t.bind(t,8567))},9768:(e,s,t)=>{"use strict";t.d(s,{CustomerQuoteMessagesCard:()=>m});var r=t(5155),l=t(2115),a=t(7650),d=t(8799),o=t(7275),n=t(926);let i=(0,n.createServerReference)("7094ebe770bf3ca746d692718a24c9b5aef86ed8fd",n.callServer,void 0,n.findSourceMapURL,"submitCustomerQuoteMessageAction"),c={ok:!0};function m(e){let{quoteId:s,messages:t,messagesUnavailable:d=!1,readOnly:o=!1}=e,n=(0,l.useRef)(null),m=(0,l.useRef)(null),p=(0,l.useMemo)(()=>i.bind(null,s),[s]),[h,b]=(0,a.useFormState)(p,c);(0,l.useEffect)(()=>{var e;h.ok&&h.message&&(null==(e=n.current)||e.reset(),m.current&&(m.current.value=""))},[h.ok,h.message]);let g=t.length>0;return(0,r.jsxs)("section",{className:"space-y-4 rounded-2xl border border-slate-900 bg-slate-950/40 px-6 py-5",children:[(0,r.jsxs)("header",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Messages"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white heading-tight",children:"Messages"}),(0,r.jsx)("p",{className:"text-sm text-slate-400",children:"Share clarifications and notes about this RFQ. Zartman.io will respond here."})]})]}),d?(0,r.jsx)("p",{className:"rounded-xl border border-yellow-500/30 bg-yellow-500/5 px-5 py-3 text-sm text-yellow-100",children:"Messages are temporarily unavailable. Refresh the page or try again later."}):null,(0,r.jsx)(x,{messages:t,hasMessages:g}),(0,r.jsxs)("div",{className:"space-y-3 border-t border-slate-900/60 pt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-slate-100",children:"Send a message"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"Shared with the Zartman.io team supporting this RFQ."})]}),o?(0,r.jsx)("p",{className:"rounded-xl border border-dashed border-slate-800/70 bg-black/30 px-5 py-3 text-xs text-slate-400",children:"Read-only preview. Remove the email override to reply as the customer."}):null,(0,r.jsx)(u,{ref:n,textareaRef:m,onSubmit:b,state:h,disabled:o||d})]})]})}function x(e){let{messages:s,hasMessages:t}=e;return t?(0,r.jsx)("ol",{className:"space-y-3",children:s.map(e=>{var s;let t="customer"===e.author_type?"You":"Zartman.io";return(0,r.jsxs)("li",{className:"rounded-2xl border border-slate-900/70 bg-slate-950/50 px-5 py-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-400",children:[(0,r.jsx)("span",{className:"font-semibold text-slate-100",children:t}),(0,r.jsx)("span",{children:null!=(s=(0,d.r)(e.created_at,{includeTime:!0}))?s:"Just now"})]}),(0,r.jsx)("p",{className:"mt-2 whitespace-pre-wrap text-sm leading-relaxed text-slate-100",children:e.body})]},e.id)})}):(0,r.jsx)("p",{className:"rounded-2xl border border-dashed border-slate-800/70 bg-black/30 px-6 py-5 text-sm text-slate-400",children:"No messages yet. Use this space to share clarifications or notes about this RFQ."})}let u=(0,l.forwardRef)((e,s)=>{var t;let{onSubmit:l,state:a,disabled:d=!1,textareaRef:o}=e,n=null==(t=a.fieldErrors)?void 0:t.body,i=a.ok&&!!a.message,c=a.error&&"Quote not found."===a.error.trim();return(0,r.jsxs)("form",{ref:s,action:l,className:"space-y-3",children:[i?(0,r.jsx)("p",{className:"rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-4 py-2.5 text-sm text-emerald-100",children:a.message}):null,!a.ok&&a.error?c?(0,r.jsxs)("div",{className:"space-y-1 rounded-xl border border-red-500/40 bg-red-500/10 px-4 py-3 text-red-100",children:[(0,r.jsx)("p",{className:"font-semibold text-red-100",children:"We couldn't load this RFQ."}),(0,r.jsx)("p",{className:"text-sm text-red-200",children:"It might have been removed or you may no longer have access. If this looks wrong, reach out to the Zartman.io team."})]}):(0,r.jsx)("p",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-2.5 text-sm text-red-200",children:a.error}):null,(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"customer-message-body",className:"text-sm font-medium text-slate-200",children:"Message"}),(0,r.jsx)("textarea",{id:"customer-message-body",name:"body",ref:o,rows:4,maxLength:2e3,disabled:d,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60",placeholder:"Share files, timing updates, or questions for the Zartman team..."}),n?(0,r.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:n}):null]}),(0,r.jsx)(p,{disabled:d})]})});function p(e){let{disabled:s}=e,{pending:t}=(0,a.useFormStatus)();return(0,r.jsx)("button",{type:"submit",disabled:t||s,className:"".concat(o.n4," ").concat(o.m.md," w-full sm:w-auto"),children:t?"Sending...":"Send message"})}u.displayName="CustomerMessageComposerForm"}},e=>{e.O(0,[2619,5246,8441,1255,7358],()=>e(e.s=8265)),_N_E=e.O()}]);