(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[886],{63:(e,t,r)=>{"use strict";var s=r(7260);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},4355:(e,t,r)=>{"use strict";r.d(t,{CustomerQuoteMessageComposer:()=>c});var s=r(5155),a=r(2115),l=r(7650),n=r(926);let d=(0,n.createServerReference)("60c327694808e8895cf0554454700191384983ed3a",n.callServer,void 0,n.findSourceMapURL,"postCustomerQuoteMessageAction");var i=r(7275);let o={success:!1,error:null};function c(e){let{quoteId:t,customerName:r,disabled:n=!1}=e,i=(0,a.useRef)(null),c=(0,a.useRef)(null),[m,x]=(0,l.useFormState)(d,o);return(0,a.useEffect)(()=>{var e;m.success&&(null==(e=i.current)||e.reset(),c.current&&(c.current.value=""))},[m.success,m.messageId]),(0,s.jsxs)("form",{ref:i,action:x,className:"space-y-3",children:[(0,s.jsx)("input",{type:"hidden",name:"quote_id",value:t}),(0,s.jsx)("input",{type:"hidden",name:"author_name",value:null!=r?r:""}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{htmlFor:"customer-quote-message-body",className:"text-sm font-medium text-slate-200",children:"Message"}),(0,s.jsx)("textarea",{id:"customer-quote-message-body",name:"body",ref:c,rows:4,maxLength:2e3,disabled:n,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none",placeholder:"Share files, timing updates, or questions for the Zartman team..."})]}),m.error&&(0,s.jsx)("p",{className:"text-sm text-red-400",role:"alert","aria-live":"polite",children:m.error}),(0,s.jsx)(u,{disabled:n})]})}function u(e){let{disabled:t}=e,{pending:r}=(0,l.useFormStatus)();return(0,s.jsx)("button",{type:"submit",disabled:r||t,className:"".concat(i.n4," ").concat(i.m.md," w-full sm:w-auto"),children:r?"Sending...":"Send message"})}},8392:(e,t,r)=>{"use strict";r.d(t,{CustomerBidSelectionCard:()=>x});var s=r(5155),a=r(2821),l=r(2115),n=r(7650),d=r(63),i=r(7344),o=r(8799),c=r(926);let u=(0,c.createServerReference)("70863bfd9a4f695219bf22bb6724dd9243f10f2810",c.callServer,void 0,c.findSourceMapURL,"submitCustomerSelectWinningBidAction"),m={ok:!0,message:""};function x(e){let{quoteId:t,bids:r,canSelectWinner:c,disableReason:x,winningBidId:p,winningBidSelectedAt:f,quoteWon:h}=e,g=(0,d.useRouter)(),v=u.bind(null,t),[y,j]=(0,n.useFormState)(v,m),w=y.ok?y.message:"",N=y.ok?"":y.error;(0,l.useEffect)(()=>{w&&g.refresh()},[g,w]);let S=f?(0,o.r)(f,{includeTime:!0}):null,_=c&&r.length>0;return(0,s.jsxs)("div",{className:"mt-5 space-y-4",children:[h?(0,s.jsxs)("div",{className:"rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-100",children:["Winning supplier selected"," ",S?"on ".concat(S):"successfully","."]}):null,N?(0,s.jsx)("p",{className:"rounded-xl border border-red-500/40 bg-red-500/5 px-4 py-3 text-sm text-red-200",role:"alert",children:N}):null,w?(0,s.jsx)("p",{className:"rounded-xl border border-emerald-500/40 bg-emerald-500/5 px-4 py-3 text-sm text-emerald-100",children:w}):null,!_&&x?(0,s.jsx)("p",{className:"rounded-xl border border-slate-800 bg-slate-950/60 px-4 py-2 text-xs text-slate-400",children:x}):null,(0,s.jsx)("div",{className:"space-y-3",children:r.map((e,t)=>{var r;let l=(0,i.v)(e.amount,null!=(r=e.currency)?r:void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),n="number"==typeof e.lead_time_days&&Number.isFinite(e.lead_time_days)?"".concat(e.lead_time_days," day").concat(1===e.lead_time_days?"":"s"):"Lead time pending",d=(0,o.r)(e.created_at,{includeTime:!0}),c=function(e){switch("string"==typeof e?e.trim().toLowerCase():""){case"won":return"Won";case"lost":return"Lost";case"revised":return"Revised";case"withdrawn":return"Withdrawn";case"accepted":return"Accepted";case"declined":return"Declined";default:return"Submitted"}}(e.status),u=function(e){let t="string"==typeof e?e.trim().toLowerCase():"";return"won"===t?"border-emerald-400/50 bg-emerald-500/10 text-emerald-100":"lost"===t||"declined"===t?"border-slate-700 bg-transparent text-slate-300":"withdrawn"===t?"border-amber-400/50 bg-amber-500/10 text-amber-100":"border-slate-800 bg-slate-900/40 text-slate-200"}(e.status),m=e.id===p||"string"==typeof e.status&&"won"===e.status.trim().toLowerCase();return(0,s.jsxs)("article",{className:(0,a.A)("rounded-2xl border px-4 py-4 shadow-sm transition",m?"border-emerald-500/60 bg-emerald-500/5":"border-slate-900/60 bg-slate-950/40 hover:border-slate-700"),children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.18em] text-slate-500",children:"Supplier ".concat(t+1)}),(0,s.jsx)("p",{className:"text-xl font-semibold text-white",children:l}),(0,s.jsxs)("p",{className:"text-sm text-slate-300",children:[n," â€¢ Submitted ",d]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsxs)("span",{className:(0,a.A)("rounded-full border px-3 py-1 text-xs font-semibold",u),children:["Status: ",c]}),m?(0,s.jsx)("span",{className:"rounded-full border border-emerald-400/50 bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-100",children:"Winner"}):null]})]}),_&&!m?(0,s.jsx)(b,{bidId:e.id,action:j}):null]},e.id)})})]})}function b(e){let{bidId:t,action:r}=e,{pending:a}=(0,n.useFormStatus)();return(0,s.jsxs)("form",{action:r,className:"mt-3",children:[(0,s.jsx)("input",{type:"hidden",name:"bidId",value:t}),(0,s.jsx)("button",{type:"submit",disabled:a,className:"inline-flex items-center rounded-full border border-emerald-400/50 bg-emerald-500/10 px-4 py-1.5 text-sm font-semibold text-emerald-100 transition hover:bg-emerald-500/20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-emerald-400 disabled:cursor-not-allowed disabled:opacity-60",children:a?"Selecting...":"Select winner"})]})}},8501:(e,t,r)=>{Promise.resolve().then(r.bind(r,8392)),Promise.resolve().then(r.bind(r,4355)),Promise.resolve().then(r.bind(r,8567)),Promise.resolve().then(r.bind(r,9867))}},e=>{e.O(0,[297,441,255,358],()=>e(e.s=8501)),_N_E=e.O()}]);