(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[886],{63:(e,s,t)=>{"use strict";var r=t(7260);t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})},617:(e,s,t)=>{"use strict";t.d(s,{CustomerQuoteTrackingCard:()=>d});var r=t(5155),a=t(2821),l=t(8799);function d(e){let{events:s,className:t}=e,d=Array.isArray(s)&&s.length>0;return(0,r.jsxs)("section",{className:(0,a.A)(t,"space-y-3"),children:[(0,r.jsxs)("header",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"TIMELINE"}),(0,r.jsx)("h2",{className:"mt-1 text-lg font-semibold text-white",children:"Production milestones"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-slate-300",children:"Follow RFQ progress, supplier bids, and status changes for this quote."})]}),d?(0,r.jsx)("ol",{className:"mt-2 space-y-4 border-l border-slate-800 pl-5",children:s.map(e=>(0,r.jsxs)("li",{className:"relative pb-2 last:pb-0",children:[(0,r.jsx)("span",{className:"absolute -left-[6px] mt-1 h-3 w-3 rounded-full border-2 border-emerald-400/50 bg-emerald-400/10"}),(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-white",children:e.title}),(0,r.jsx)("p",{className:"text-[11px] text-slate-500",children:(0,l.r)(e.at,{includeTime:!0})}),e.description?(0,r.jsx)("p",{className:"text-xs text-slate-200",children:e.description}):null,e.actorLabel?(0,r.jsx)("p",{className:"text-[10px] uppercase tracking-wide text-slate-500",children:e.actorLabel}):null]})]},e.id))}):(0,r.jsx)("p",{className:"text-xs text-slate-400",children:"We’ll show your RFQ and bid activity here as things progress."})]})}},3544:(e,s,t)=>{"use strict";t.d(s,{CustomerQuoteMessagesCard:()=>m});var r=t(5155),a=t(2115),l=t(7650),d=t(8799),o=t(7275),n=t(926);let i=(0,n.createServerReference)("7075e7af3f107908c821cc60f7ac0f4299de5c7f06",n.callServer,void 0,n.findSourceMapURL,"submitCustomerQuoteMessageAction"),c={ok:!0};function m(e){let{quoteId:s,messages:t,messagesUnavailable:d=!1,readOnly:o=!1}=e,n=(0,a.useRef)(null),m=(0,a.useRef)(null),p=(0,a.useMemo)(()=>i.bind(null,s),[s]),[b,h]=(0,l.useFormState)(p,c);(0,a.useEffect)(()=>{var e;b.ok&&b.message&&(null==(e=n.current)||e.reset(),m.current&&(m.current.value=""))},[b.ok,b.message]);let f=t.length>0;return(0,r.jsxs)("section",{className:"space-y-4 rounded-2xl border border-slate-900 bg-slate-950/40 p-4",children:[(0,r.jsxs)("header",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Messages"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Messages"}),(0,r.jsx)("p",{className:"text-sm text-slate-400",children:"Share clarifications and notes about this RFQ. Zartman.io will respond here."})]})]}),d?(0,r.jsx)("p",{className:"rounded-xl border border-yellow-500/30 bg-yellow-500/5 px-3 py-2 text-sm text-yellow-100",children:"Messages are temporarily unavailable. Refresh the page or try again later."}):null,(0,r.jsx)(u,{messages:t,hasMessages:f}),(0,r.jsxs)("div",{className:"space-y-3 border-t border-slate-900/60 pt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-slate-100",children:"Send a message"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"Shared with the Zartman.io team supporting this RFQ."})]}),o?(0,r.jsx)("p",{className:"rounded-xl border border-dashed border-slate-800/70 bg-black/30 px-3 py-2 text-xs text-slate-400",children:"Read-only preview. Remove the email override to reply as the customer."}):null,(0,r.jsx)(x,{ref:n,textareaRef:m,onSubmit:h,state:b,disabled:o||d})]})]})}function u(e){let{messages:s,hasMessages:t}=e;return t?(0,r.jsx)("ol",{className:"space-y-3",children:s.map(e=>{var s;let t="customer"===e.author_type?"You":"Zartman.io";return(0,r.jsxs)("li",{className:"rounded-2xl border border-slate-900/70 bg-slate-950/50 px-4 py-3",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-400",children:[(0,r.jsx)("span",{className:"font-semibold text-slate-100",children:t}),(0,r.jsx)("span",{children:null!=(s=(0,d.r)(e.created_at,{includeTime:!0}))?s:"Just now"})]}),(0,r.jsx)("p",{className:"mt-2 whitespace-pre-wrap text-sm leading-relaxed text-slate-100",children:e.body})]},e.id)})}):(0,r.jsx)("p",{className:"rounded-2xl border border-dashed border-slate-800/70 bg-black/30 px-4 py-4 text-sm text-slate-400",children:"No messages yet. Use this space to share clarifications or notes about this RFQ."})}let x=(0,a.forwardRef)((e,s)=>{var t;let{onSubmit:a,state:l,disabled:d=!1,textareaRef:o}=e,n=null==(t=l.fieldErrors)?void 0:t.body,i=l.ok&&!!l.message;return(0,r.jsxs)("form",{ref:s,action:a,className:"space-y-3",children:[i?(0,r.jsx)("p",{className:"rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-100",children:l.message}):null,!l.ok&&l.error?(0,r.jsx)("p",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:l.error}):null,(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"customer-message-body",className:"text-sm font-medium text-slate-200",children:"Message"}),(0,r.jsx)("textarea",{id:"customer-message-body",name:"body",ref:o,rows:4,maxLength:2e3,disabled:d,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60",placeholder:"Share files, timing updates, or questions for the Zartman team..."}),n?(0,r.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:n}):null]}),(0,r.jsx)(p,{disabled:d})]})});function p(e){let{disabled:s}=e,{pending:t}=(0,l.useFormStatus)();return(0,r.jsx)("button",{type:"submit",disabled:t||s,className:"".concat(o.n4," ").concat(o.m.md," w-full sm:w-auto"),children:t?"Sending...":"Send message"})}x.displayName="CustomerMessageComposerForm"},9191:(e,s,t)=>{"use strict";t.d(s,{CustomerQuoteProjectCard:()=>m});var r=t(5155),a=t(2115),l=t(7650),d=t(7275),o=t(926);let n=(0,o.createServerReference)("70cfd6dfd3cd0d76e24e4ce03353dff0e25ee58126",o.callServer,void 0,o.findSourceMapURL,"submitCustomerQuoteProjectAction");var i=t(8799);let c={ok:!0};function m(e){var s,t,d;let{quoteId:o,project:m,readOnly:p=!1,projectUnavailable:b=!1}=e,[h,f]=(0,a.useState)(!1),g=(0,a.useMemo)(()=>n.bind(null,o),[o]),[j,N]=(0,l.useFormState)(g,c),y=(0,a.useMemo)(()=>(function(e){var s,t,r,a;let l=null!=e?e:c;return{ok:l.ok,message:null!=(r=l.message)?r:"",error:null!=(a=l.error)?a:"",fieldErrors:{poNumber:null==(s=l.fieldErrors)?void 0:s.poNumber,targetShipDate:null==(t=l.fieldErrors)?void 0:t.targetShipDate}}})(j),[j]),v=(null==m?void 0:m.target_ship_date)?m.target_ship_date.slice(0,10):"",w=(null==m?void 0:m.target_ship_date)?null!=(s=(0,i.r)(m.target_ship_date))?s:m.target_ship_date:"",S=h&&y.ok&&!!y.message,k=h&&!y.ok&&!!y.error,_=h&&!y.ok,R=p||b;return(0,r.jsxs)("section",{className:"space-y-4 rounded-2xl border border-slate-900 bg-slate-950/40 p-4",children:[(0,r.jsxs)("header",{className:"space-y-1",children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-emerald-300",children:"Project kickoff"}),(0,r.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Next steps for this RFQ"}),(0,r.jsx)("p",{className:"text-sm text-slate-300",children:"Share your PO number and target ship date so we can kick off production."})]}),b?(0,r.jsx)("p",{className:"rounded-xl border border-yellow-500/30 bg-yellow-500/10 px-3 py-2 text-sm text-yellow-100",children:"Project details are temporarily unavailable."}):null,(0,r.jsxs)("dl",{className:"grid gap-3 text-sm text-slate-200 sm:grid-cols-2",children:[(0,r.jsx)(u,{label:"PO number",value:null!=(t=null==m?void 0:m.po_number)?t:"Pending"}),(0,r.jsx)(u,{label:"Target ship date",value:w||"Not set"})]}),p?(0,r.jsx)("p",{className:"rounded-xl border border-dashed border-slate-800/70 bg-black/40 px-3 py-2 text-xs text-slate-400",children:"Read-only preview. Switch back to your primary email to edit project details."}):(0,r.jsxs)("form",{action:e=>(f(!0),N(e)),className:"space-y-3",children:[S&&y.message?(0,r.jsx)("p",{className:"rounded-xl border border-emerald-500/30 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-100",children:y.message}):null,k&&y.error?(0,r.jsx)("p",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:y.error}):null,(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"customer-project-po",className:"text-sm font-medium text-slate-200",children:"Purchase order number"}),(0,r.jsx)("input",{id:"customer-project-po",name:"poNumber",type:"text",maxLength:100,defaultValue:null!=(d=null==m?void 0:m.po_number)?d:"",disabled:R,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60",placeholder:"PO-12345"}),_&&y.fieldErrors.poNumber?(0,r.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:y.fieldErrors.poNumber}):null]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"customer-project-target-date",className:"text-sm font-medium text-slate-200",children:"Target ship date"}),(0,r.jsx)("input",{id:"customer-project-target-date",name:"targetShipDate",type:"date",defaultValue:v,disabled:R,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60"}),_&&y.fieldErrors.targetShipDate?(0,r.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:y.fieldErrors.targetShipDate}):null]}),(0,r.jsx)(x,{disabled:R})]})]})}function u(e){let{label:s,value:t}=e;return(0,r.jsxs)("div",{className:"rounded-xl border border-slate-900/60 bg-slate-950/30 px-3 py-2",children:[(0,r.jsx)("dt",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:s}),(0,r.jsx)("dd",{className:"font-medium text-slate-100",children:t})]})}function x(e){let{disabled:s}=e,{pending:t}=(0,l.useFormStatus)();return(0,r.jsx)("button",{type:"submit",disabled:t||s,className:"".concat(d.n4," ").concat(d.m.md," w-full sm:w-auto"),children:t?"Saving...":"Save project details"})}},9424:(e,s,t)=>{"use strict";t.d(s,{CustomerBidSelectionCard:()=>x});var r=t(5155),a=t(2821),l=t(2115),d=t(7650),o=t(63),n=t(7344),i=t(8799),c=t(926);let m=(0,c.createServerReference)("7083238811daee12dbbffc10be428995cedf8dda71",c.callServer,void 0,c.findSourceMapURL,"submitCustomerSelectWinningBidAction"),u={ok:!0,message:""};function x(e){let{quoteId:s,bids:t,canSelectWinner:c,disableReason:x,winningBidId:b,winningBidSelectedAt:h,quoteWon:f}=e,g=(0,o.useRouter)(),j=m.bind(null,s),[N,y]=(0,d.useFormState)(j,u),v=N.ok?N.message:"",w=N.ok?"":N.error;(0,l.useEffect)(()=>{v&&g.refresh()},[g,v]);let S=h?(0,i.r)(h,{includeTime:!0}):null,k=c&&t.length>0;return(0,r.jsxs)("div",{className:"mt-5 space-y-4",children:[f?(0,r.jsxs)("div",{className:"rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-100",children:["Winning supplier selected"," ",S?"on ".concat(S):"successfully","."]}):null,w?(0,r.jsx)("p",{className:"rounded-xl border border-red-500/40 bg-red-500/5 px-4 py-3 text-sm text-red-200",role:"alert",children:w}):null,v?(0,r.jsx)("p",{className:"rounded-xl border border-emerald-500/40 bg-emerald-500/5 px-4 py-3 text-sm text-emerald-100",children:v}):null,!k&&x?(0,r.jsx)("p",{className:"rounded-xl border border-slate-800 bg-slate-950/60 px-4 py-2 text-xs text-slate-400",children:x}):null,(0,r.jsx)("div",{className:"space-y-3",children:t.map((e,s)=>{var t;let l=(0,n.v)(e.amount,null!=(t=e.currency)?t:void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),d="number"==typeof e.lead_time_days&&Number.isFinite(e.lead_time_days)?"".concat(e.lead_time_days," day").concat(1===e.lead_time_days?"":"s"):"Lead time pending",o=(0,i.r)(e.created_at,{includeTime:!0}),c=function(e){switch("string"==typeof e?e.trim().toLowerCase():""){case"won":return"Won";case"lost":return"Lost";case"revised":return"Revised";case"withdrawn":return"Withdrawn";case"accepted":return"Accepted";case"declined":return"Declined";default:return"Submitted"}}(e.status),m=function(e){let s="string"==typeof e?e.trim().toLowerCase():"";return"won"===s?"border-emerald-400/50 bg-emerald-500/10 text-emerald-100":"lost"===s||"declined"===s?"border-slate-700 bg-transparent text-slate-300":"withdrawn"===s?"border-amber-400/50 bg-amber-500/10 text-amber-100":"border-slate-800 bg-slate-900/40 text-slate-200"}(e.status),u=e.id===b||"string"==typeof e.status&&"won"===e.status.trim().toLowerCase();return(0,r.jsxs)("article",{className:(0,a.A)("rounded-2xl border px-4 py-4 shadow-sm transition",u?"border-emerald-500/60 bg-emerald-500/5":"border-slate-900/60 bg-slate-950/40 hover:border-slate-700"),children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-[11px] font-semibold uppercase tracking-[0.18em] text-slate-500",children:"Supplier ".concat(s+1)}),(0,r.jsx)("p",{className:"text-xl font-semibold text-white",children:l}),(0,r.jsxs)("p",{className:"text-sm text-slate-300",children:[d," • Submitted ",o]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsxs)("span",{className:(0,a.A)("rounded-full border px-3 py-1 text-xs font-semibold",m),children:["Status: ",c]}),u?(0,r.jsx)("span",{className:"rounded-full border border-emerald-400/50 bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-100",children:"Winner"}):null]})]}),k&&!u?(0,r.jsx)(p,{bidId:e.id,action:y}):null]},e.id)})})]})}function p(e){let{bidId:s,action:t}=e,{pending:a}=(0,d.useFormStatus)();return(0,r.jsxs)("form",{action:t,className:"mt-3",children:[(0,r.jsx)("input",{type:"hidden",name:"bidId",value:s}),(0,r.jsx)("button",{type:"submit",disabled:a,className:"inline-flex items-center rounded-full border border-emerald-400/50 bg-emerald-500/10 px-4 py-1.5 text-sm font-semibold text-emerald-100 transition hover:bg-emerald-500/20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-emerald-400 disabled:cursor-not-allowed disabled:opacity-60",children:a?"Selecting...":"Select winner"})]})}},9715:(e,s,t)=>{Promise.resolve().then(t.bind(t,9424)),Promise.resolve().then(t.bind(t,3544)),Promise.resolve().then(t.bind(t,9191)),Promise.resolve().then(t.bind(t,617)),Promise.resolve().then(t.bind(t,8567)),Promise.resolve().then(t.bind(t,9867))}},e=>{e.O(0,[297,441,255,358],()=>e(e.s=9715)),_N_E=e.O()}]);