(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6135:(e,t,l)=>{"use strict";l.d(t,{default:()=>d});var a=l(5155),r=l(2115);let s=function(){for(var e,t,l=0,a="",r=arguments.length;l<r;l++)(e=arguments[l])&&(t=function e(t){var l,a,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var s=t.length;for(l=0;l<s;l++)t[l]&&(a=e(t[l]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}(e))&&(a&&(a+=" "),a+=t);return a},n={file:null,fileName:null,name:"",email:"",company:"",notes:""},i=["step","stp","iges","igs","stl","sldprt","sldasm","zip","prt","sat","x_t","x_b","ipt"];function o(e){let t=e.name.toLowerCase().split("."),l=t.length>1?t.pop():"";return i.includes(l)}function d(){let[e,t]=(0,r.useState)(n),[l,i]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),[p,c]=(0,r.useState)(null),[u,f]=(0,r.useState)(!1),x=!!(e.file&&e.name&&e.email),b=e=>l=>{let a=l.target.value;t(t=>({...t,[e]:a}))},h=async l=>{var a,r;if(l.preventDefault(),c(null),f(!1),!e.file)return void c("Please select a CAD file to upload.");if(!o(e.file))return void c("Unsupported file type. Please upload STEP, IGES, STL, SolidWorks, or zipped CAD files.");if(!e.name||!e.email)return void c("Please add at least your name and email.");m(!0);try{let l=new FormData;l.append("file",e.file),l.append("name",e.name),l.append("email",e.email),l.append("company",e.company),l.append("notes",e.notes);let r=await fetch("/api/upload",{method:"POST",body:l});if(!r.ok){let e=await r.json().catch(()=>null);throw Error(null!=(a=null==e?void 0:e.message)?a:"Upload failed")}t(e=>({...e,file:null,fileName:null,notes:""})),f(!0),c(null)}catch(e){console.error(e),c(null!=(r=null==e?void 0:e.message)?r:"Upload failed. Please try again."),f(!1)}finally{m(!1)}};return(0,a.jsxs)("section",{"aria-label":"Upload CAD file",className:"relative flex flex-col rounded-3xl border border-border bg-surface p-6 sm:p-8",children:[(0,a.jsxs)("div",{className:s("flex flex-col items-center justify-center rounded-2xl border-2 border-dashed px-6 py-10 text-center text-sm sm:px-8 sm:py-12",l?"border-accent/80 bg-accent/5":"border-border/60"),onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),i(!0)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),i(!1)},onDrop:e=>{var l;e.preventDefault(),e.stopPropagation(),i(!1);let a=null==(l=e.dataTransfer.files)?void 0:l[0];if(a){if(!o(a)){c("Unsupported file type. Please upload STEP, IGES, STL, SolidWorks, or zipped CAD files."),f(!1),t(e=>({...e,file:null,fileName:null}));return}c(null),f(!1),t(e=>({...e,file:a,fileName:a.name}))}},children:[(0,a.jsx)("p",{className:"text-xs text-muted",children:"STEP, IGES, STL, SolidWorks, or zipped assemblies. Max ~25 MB."}),(0,a.jsxs)("div",{className:"mt-4 flex flex-col items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"file",className:"inline-flex cursor-pointer items-center justify-center rounded-full border border-border px-4 py-2 text-xs font-medium text-foreground transition hover:border-accent hover:text-accent",children:"Browse from device"}),(0,a.jsx)("p",{className:"text-[11px] text-muted",children:"…or drag & drop into this box"}),(0,a.jsxs)("p",{className:"mt-1 text-[11px] text-muted",children:["Selected:"," ",e.fileName?(0,a.jsx)("span",{className:"text-foreground",children:e.fileName}):"No file selected yet"]})]}),(0,a.jsx)("input",{id:"file",name:"file",type:"file",className:"hidden",onChange:e=>{var l,a;let r=null!=(a=null==(l=e.target.files)?void 0:l[0])?a:null;if(r){if(!o(r)){c("Unsupported file type. Please upload STEP, IGES, STL, SolidWorks, or zipped CAD files."),f(!1),t(e=>({...e,file:null,fileName:null})),e.target.value="";return}c(null),f(!1),t(e=>({...e,file:r,fileName:r.name}))}},accept:".step,.stp,.iges,.igs,.stl,.sldprt,.sldasm,.zip,.prt,.sat,.x_t,.x_b,.ipt"})]}),(0,a.jsxs)("form",{onSubmit:h,className:"mt-6 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{htmlFor:"name",className:"text-xs font-medium text-muted tracking-wide",children:["Your name",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"name",type:"text",required:!0,value:e.name,onChange:b("name"),className:"w-full rounded-md border border-border bg-transparent px-3 py-2 text-sm text-foreground outline-none ring-0 transition focus:border-accent"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{htmlFor:"email",className:"text-xs font-medium text-muted tracking-wide",children:["Email",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"email",type:"email",required:!0,value:e.email,onChange:b("email"),className:"w-full rounded-md border border-border bg-transparent px-3 py-2 text-sm text-foreground outline-none ring-0 transition focus:border-accent"})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{htmlFor:"company",className:"text-xs font-medium text-muted tracking-wide",children:"Company"}),(0,a.jsx)("input",{id:"company",type:"text",value:e.company,onChange:b("company"),className:"w-full rounded-md border border-border bg-transparent px-3 py-2 text-sm text-foreground outline-none ring-0 transition focus:border-accent"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{htmlFor:"notes",className:"text-xs font-medium text-muted tracking-wide",children:"Process / quantity / timing"}),(0,a.jsx)("textarea",{id:"notes",rows:3,value:e.notes,onChange:b("notes"),placeholder:"CNC, qty 50, target ship date, special material or tolerances...",className:"w-full rounded-md border border-border bg-transparent px-3 py-2 text-sm text-foreground outline-none ring-0 transition focus:border-accent"})]}),(0,a.jsx)("div",{className:"pt-1",children:(0,a.jsx)("button",{type:"submit",disabled:d||!x,className:s("mt-2 w-full rounded-full px-6 py-3 text-sm font-medium text-black shadow-sm transition disabled:cursor-not-allowed disabled:opacity-70",x&&!d?"bg-emerald-500 hover:bg-emerald-400":"bg-emerald-500/40"),children:d?"Uploading...":"Upload file"})}),(0,a.jsxs)("div",{className:"min-h-[1.25rem] pt-1",children:[p&&(0,a.jsxs)("p",{className:"text-xs text-red-400",role:"alert",children:["Error: ",p]}),!p&&u&&(0,a.jsx)("p",{className:"text-xs text-emerald-400",role:"status",children:"Thanks — your CAD file is in the queue. I’ll take a look."})]})]})]})}},7254:(e,t,l)=>{Promise.resolve().then(l.bind(l,6135))}},e=>{e.O(0,[441,255,358],()=>e(e.s=7254)),_N_E=e.O()}]);