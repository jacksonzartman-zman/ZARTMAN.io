(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6135:(e,l,t)=>{"use strict";t.d(l,{default:()=>o});var a=t(5155),r=t(2115);let n=function(){for(var e,l,t=0,a="",r=arguments.length;t<r;t++)(e=arguments[t])&&(l=function e(l){var t,a,r="";if("string"==typeof l||"number"==typeof l)r+=l;else if("object"==typeof l)if(Array.isArray(l)){var n=l.length;for(t=0;t<n;t++)l[t]&&(a=e(l[t]))&&(r&&(r+=" "),r+=a)}else for(a in l)l[a]&&(r&&(r+=" "),r+=a);return r}(e))&&(a&&(a+=" "),a+=l);return a};function o(){let[e,l]=(0,r.useState)({file:null,fileName:"",name:"",email:"",company:"",notes:""}),[t,o]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1),[d,m]=(0,r.useState)(null),[u,c]=(0,r.useState)(null);function f(e){e&&(l(l=>({...l,file:e,fileName:e.name})),m(null),c(null))}function p(e){let{name:t,value:a}=e.target;l(e=>({...e,[t]:a}))}async function x(t){var a,r;if(t.preventDefault(),!e.file){m("Please select a CAD file to upload."),c(null);return}if(!e.name||!e.email){m("Name and email are required."),c(null);return}i(!0),m(null),c(null);try{let t=new FormData;t.append("file",e.file),t.append("name",e.name),t.append("email",e.email),t.append("company",e.company),t.append("notes",e.notes);let r=await fetch("/api/upload",{method:"POST",body:t});if(!r.ok){let e=await r.json().catch(()=>null);throw Error(null!=(a=null==e?void 0:e.message)?a:"Upload failed")}l(e=>({...e,file:null,fileName:"",notes:""})),c("Thanks — your CAD file is in the queue. I’ll take a look."),m(null)}catch(e){console.error(e),m(null!=(r=null==e?void 0:e.message)?r:"Upload failed. Please try again or email the file."),c(null)}finally{i(!1)}}let b=!!(e.file&&e.name&&e.email);return(0,a.jsx)("section",{"aria-label":"CAD upload",className:"rounded-3xl border border-border bg-surface px-6 py-6 sm:px-8 sm:py-8",children:(0,a.jsxs)("form",{onSubmit:x,className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:n("rounded-3xl border-2 border-dashed px-6 py-6 text-center text-xs sm:text-sm",t?"border-accent/70 bg-accent/5":"border-border/80 bg-surface"),onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),o(!0)},onDragOver:function(e){e.preventDefault(),e.stopPropagation(),o(!0)},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),o(!1)},onDrop:function(e){var l,t;e.preventDefault(),e.stopPropagation(),o(!1);let a=null==(t=e.dataTransfer)||null==(l=t.files)?void 0:l[0];a&&f(a)},children:[(0,a.jsx)("p",{className:"font-medium text-muted",children:"STEP, IGES, STL, SolidWorks, or zipped assemblies. Max ~25 MB."}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-center",children:[(0,a.jsx)("label",{htmlFor:"file",className:"inline-flex cursor-pointer items-center justify-center rounded-full border border-border bg-surface px-4 py-2 text-xs font-medium text-foreground transition hover:bg-border/20",children:"Browse from device"}),(0,a.jsx)("input",{id:"file",name:"file",type:"file",className:"hidden",onChange:function(e){var l,t;f(null!=(t=null==(l=e.target.files)?void 0:l[0])?t:null)}})]}),(0,a.jsx)("p",{className:"mt-2 text-[11px] text-muted",children:"…or drag & drop into this box"}),(0,a.jsxs)("p",{className:"mt-1 text-[11px] text-muted",children:["Selected:"," ",e.fileName?e.fileName:"No file selected yet"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{htmlFor:"name",className:"text-[11px] font-medium text-muted",children:"Your name*"}),(0,a.jsx)("input",{id:"name",name:"name",required:!0,value:e.name,onChange:p,className:"h-9 rounded-md border border-border bg-surface px-3 text-sm text-foreground outline-none focus:border-accent focus:ring-0"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{htmlFor:"email",className:"text-[11px] font-medium text-muted",children:"Email*"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:e.email,onChange:p,className:"h-9 rounded-md border border-border bg-surface px-3 text-sm text-foreground outline-none focus:border-accent focus:ring-0"})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{htmlFor:"company",className:"text-[11px] font-medium text-muted",children:"Company"}),(0,a.jsx)("input",{id:"company",name:"company",value:e.company,onChange:p,className:"h-9 rounded-md border border-border bg-surface px-3 text-sm text-foreground outline-none focus:border-accent focus:ring-0"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("label",{htmlFor:"notes",className:"text-[11px] font-medium text-muted",children:"Process / quantity / timing"}),(0,a.jsx)("textarea",{id:"notes",name:"notes",rows:3,value:e.notes,onChange:p,placeholder:"CNC, qty 50, target ship date, special material or tolerances...",className:"rounded-md border border-border bg-surface px-3 py-2 text-sm text-foreground outline-none focus:border-accent focus:ring-0"})]}),(0,a.jsx)("button",{type:"submit",disabled:s||!b,className:n("mt-2 w-full rounded-full px-6 py-3 text-sm font-medium text-black shadow-sm transition disabled:cursor-not-allowed disabled:opacity-70",b&&!s?"bg-emerald-500 hover:bg-emerald-400":"bg-emerald-500/40"),children:s?"Uploading...":"Upload file"}),d&&(0,a.jsxs)("p",{className:"mt-1 text-xs text-red-400",role:"alert",children:["Error: ",d]}),u&&(0,a.jsx)("p",{className:"mt-1 text-xs text-emerald-400",role:"status",children:u})]})})}},7254:(e,l,t)=>{Promise.resolve().then(t.bind(t,6135))}},e=>{e.O(0,[441,255,358],()=>e(e.s=7254)),_N_E=e.O()}]);