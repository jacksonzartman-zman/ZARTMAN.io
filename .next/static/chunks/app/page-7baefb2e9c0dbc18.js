(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6135:(e,l,t)=>{"use strict";t.d(l,{default:()=>o});var a=t(5155),r=t(2115);let s=function(){for(var e,l,t=0,a="",r=arguments.length;t<r;t++)(e=arguments[t])&&(l=function e(l){var t,a,r="";if("string"==typeof l||"number"==typeof l)r+=l;else if("object"==typeof l)if(Array.isArray(l)){var s=l.length;for(t=0;t<s;t++)l[t]&&(a=e(l[t]))&&(r&&(r+=" "),r+=a)}else for(a in l)l[a]&&(r&&(r+=" "),r+=a);return r}(e))&&(a&&(a+=" "),a+=l);return a},n=[".step",".stp",".iges",".igs",".stl",".sldprt",".zip"];function o(){let[e,l]=(0,r.useState)({file:null,fileName:"",name:"",email:"",company:"",notes:""}),[t,o]=(0,r.useState)(!1),[i,d]=(0,r.useState)(!1),[c,m]=(0,r.useState)(null),[u,p]=(0,r.useState)(null),f=()=>{m(null),p(null)},x=e=>e?(e=>{let l=e.name.toLowerCase();return n.some(e=>l.endsWith(e))})(e)?!(e.size>0x1900000)||(m("File is too large. Max size is ~".concat(25," MB.")),!1):(m("Unsupported file type. Use STEP, IGES, STL, SolidWorks, or a ZIP archive."),!1):(m("Please select a CAD file to upload."),!1),b=e=>{if(f(),!e||!x(e))return void l(e=>({...e,file:null,fileName:""}));l(l=>({...l,file:e,fileName:e.name}))},h=e=>{f();let{name:t,value:a}=e.target;l(e=>({...e,[t]:a}))},g=async t=>{if(t.preventDefault(),f(),!e.file)return void m("Please select a CAD file to upload.");if(!e.name.trim()||!e.email.trim())return void m("Name and email are required.");if(x(e.file))try{d(!0);let t=new FormData;t.append("file",e.file),t.append("name",e.name),t.append("email",e.email),t.append("company",e.company),t.append("notes",e.notes);let a=await fetch("/api/upload",{method:"POST",body:t});if(!a.ok){let e=await a.json().catch(()=>null);throw Error((null==e?void 0:e.message)||"Upload failed")}l(e=>({...e,file:null,fileName:"",notes:""})),p("Thanks — your CAD file is in the queue. I’ll take a look.")}catch(e){console.error(e),m(e.message||"Something went wrong while uploading.")}finally{d(!1)}};return(0,a.jsx)("section",{"aria-label":"Upload CAD file",className:"w-full",children:(0,a.jsxs)("form",{onSubmit:g,className:"flex flex-col gap-4 text-sm text-ink",children:[(0,a.jsxs)("div",{className:s("flex flex-col items-center justify-center rounded-2xl border-2 border-dashed px-6 py-8 text-center text-xs sm:text-sm transition",t?"border-accent/80 bg-accent/5":"border-border/80 bg-surface-muted"),onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),o(!0)},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),o(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),o(!1)},onDrop:e=>{var l,t;e.preventDefault(),e.stopPropagation(),o(!1),b(null!=(t=null==(l=e.dataTransfer.files)?void 0:l[0])?t:null)},children:[(0,a.jsx)("p",{className:"mb-2 font-medium",children:"STEP, IGES, STL, SolidWorks, or zipped assemblies. Max ~25 MB."}),(0,a.jsx)("label",{htmlFor:"file",className:"mt-2 inline-flex items-center justify-center rounded-full border border-border bg-surface px-4 py-2 text-xs font-medium hover:bg-surface/80 cursor-pointer",children:"Browse from device"}),(0,a.jsx)("input",{id:"file",name:"file",type:"file",className:"hidden",onChange:e=>{var l,t;b(null!=(t=null==(l=e.target.files)?void 0:l[0])?t:null)},accept:n.join(",")}),(0,a.jsx)("p",{className:"mt-2 text-[11px] text-muted",children:"…or drag & drop into this box"}),(0,a.jsxs)("p",{className:"mt-3 text-[11px] text-muted",children:["Selected:"," ",e.fileName?(0,a.jsx)("span",{className:"font-medium text-ink",children:e.fileName}):"No file selected yet"]})]}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"mb-1 block text-[11px] font-medium",children:["Your name",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)("input",{type:"text",name:"name",required:!0,value:e.name,onChange:h,className:"w-full rounded-md border border-border bg-surface px-3 py-2 text-sm outline-none focus:border-accent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"mb-1 block text-[11px] font-medium",children:["Email",(0,a.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,a.jsx)("input",{type:"email",name:"email",required:!0,value:e.email,onChange:h,className:"w-full rounded-md border border-border bg-surface px-3 py-2 text-sm outline-none focus:border-accent"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-[11px] font-medium",children:"Company"}),(0,a.jsx)("input",{type:"text",name:"company",value:e.company,onChange:h,className:"w-full rounded-md border border-border bg-surface px-3 py-2 text-sm outline-none focus:border-accent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-[11px] font-medium",children:"Process / quantity / timing"}),(0,a.jsx)("textarea",{name:"notes",rows:3,value:e.notes,onChange:h,placeholder:"CNC, qty 50, target ship date, special material or tolerances…",className:"w-full resize-none rounded-md border border-border bg-surface px-3 py-2 text-sm outline-none focus:border-accent"})]})]}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col gap-2",children:[(0,a.jsx)("button",{type:"submit",disabled:i,className:"inline-flex w-full items-center justify-center rounded-full bg-accent px-4 py-2 text-sm font-semibold text-ink shadow-sm hover:bg-accent/90 disabled:cursor-not-allowed disabled:opacity-60",children:i?"Uploading…":"Upload file"}),c&&(0,a.jsxs)("p",{className:"text-xs text-red-400",role:"alert",children:["Error: ",c]}),u&&(0,a.jsx)("p",{className:"text-xs text-emerald-400",role:"status",children:u})]})]})})}},7254:(e,l,t)=>{Promise.resolve().then(t.bind(t,6135))}},e=>{e.O(0,[441,255,358],()=>e(e.s=7254)),_N_E=e.O()}]);