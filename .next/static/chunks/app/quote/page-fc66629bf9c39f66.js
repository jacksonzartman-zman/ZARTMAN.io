(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{276:(e,t,r)=>{"use strict";r.d(t,{default:()=>j});var a=r(5155),s=r(2115),i=r(2821);let l=["stl","step","stp","iges","igs","sldprt","sldasm","pdf","zip"],n=new Set(l),o=l.map(e=>".".concat(e)).join(","),d="STEP, IGES, STL, SolidWorks (SLDPRT / SLDASM), PDF, or zipped assemblies",c=e=>Number((e/1048576).toFixed(1));var m=r(7275);let u=["CNC machining","3D printing","Sheet metal","Injection molding","Not sure yet"],p=["Not applicable / None","ITAR","EAR","EU Dual Use","Other / Unsure"],x=["Need a quote for a new project","Comparing suppliers","Existing production, looking for backup","Just exploring capabilities"],f={file:null,fileName:null,firstName:"",lastName:"",email:"",company:"",phone:"",manufacturingProcess:"",quantity:"",shippingPostalCode:"",exportRestriction:"",rfqReason:"",notes:"",itarAcknowledged:!1,termsAccepted:!1},h="".concat(c(0x1900000)," MB"),g="Unsupported file type. Please upload ".concat(d,"."),b=/^[^\s@]+@[^\s@]+\.[^\s@]+$/i,N=e=>!Number.isFinite(e)||e<=0?"0 MB":"".concat(c(e)," MB"),y=e=>(e=>{let t=e.toLowerCase().split("."),r=t.length>1?t.pop():"";return n.has(r)})(e.name)?e.size>0x1900000?"File is ".concat(N(e.size),". Limit is ").concat(h,"."):0===e.size?"File is empty. Please choose a different CAD file.":null:g;function j(){var e;let[t,r]=(0,s.useState)(f),[l,n]=(0,s.useState)({}),[c,g]=(0,s.useState)(!1),[j,v]=(0,s.useState)(!1),[w,P]=(0,s.useState)(null),[A,C]=(0,s.useState)(!1),[k,S]=(0,s.useState)(null),[R,q]=(0,s.useState)(!1),[F,D]=(0,s.useState)(null);(0,s.useEffect)(()=>{if("undefined"!=typeof navigator){var e;q(!!(e=navigator.userAgent)&&(!!/(ipad|iphone|ipod)/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)))}},[]);let E=!!(t.file&&t.firstName.trim()&&t.lastName.trim()&&t.email.trim()&&t.manufacturingProcess&&t.quantity.trim()&&t.exportRestriction&&t.itarAcknowledged&&t.termsAccepted),_=e=>{n(t=>{if(!t[e])return t;let r={...t};return delete r[e],r})},U=e=>t=>{let a=t.target.value;r(t=>({...t,[e]:a})),e in l&&_(e)},B=e=>t=>{let a=t.target.checked;r(t=>({...t,[e]:a})),_(e)},z=async e=>{e.preventDefault(),P(null),C(!1),S(null),D("Validating file…");let a=(e=>{let t={},r=e.firstName.trim(),a=e.lastName.trim(),s=e.email.trim(),i=e.quantity.trim(),l=e.shippingPostalCode;return e.file||(t.file="Attach your CAD file before submitting."),r||(t.firstName="First name is required."),a||(t.lastName="Last name is required."),s?b.test(s)||(t.email="Enter a valid email address."):t.email="Business email is required.",e.manufacturingProcess||(t.manufacturingProcess="Select a manufacturing process."),i||(t.quantity="Share the quantity or volumes you need."),l&&!l.trim()&&(t.shippingPostalCode="Enter a postal code or leave this blank."),e.exportRestriction||(t.exportRestriction="Select the export restriction."),e.itarAcknowledged||(t.itarAcknowledged="Please confirm these parts are not subject to ITAR."),e.termsAccepted||(t.termsAccepted="Please accept the terms before submitting."),t})(t);if(Object.keys(a).length>0){D(null),n(a),P("Please fix the highlighted fields before submitting.");return}if(!t.file){D(null),n(e=>({...e,file:"Attach your CAD file before submitting."})),P("Attach your CAD file before submitting.");return}let s=y(t.file);if(s){D(null),n(e=>({...e,file:s})),P(s);return}n({}),v(!0),D("Uploading file to Supabase…");try{var i;let e,a=t.firstName.trim(),s=t.lastName.trim(),l=[a,s].filter(Boolean).join(" "),o=t.email.trim(),d=t.company.trim(),c=t.phone.trim(),m=t.quantity.trim(),u=t.shippingPostalCode.trim(),p=t.notes.trim(),x=t.rfqReason.trim(),h=new FormData;h.append("file",t.file),h.append("name",l),h.append("email",o),h.append("company",d),h.append("phone",c),h.append("first_name",a),h.append("last_name",s),h.append("manufacturing_process",t.manufacturingProcess),h.append("quantity",m),h.append("shipping_postal_code",u),h.append("export_restriction",t.exportRestriction),h.append("rfq_reason",x),h.append("notes",p),h.append("itar_acknowledged",t.itarAcknowledged?"true":"false"),h.append("terms_accepted",t.termsAccepted?"true":"false");let g=await fetch("/api/upload",{method:"POST",body:h});D("Finalizing upload…");let b=await g.text(),N=null;if(b)try{N=JSON.parse(b)}catch(e){N=null}let y=(e=>{if(!e||"object"!=typeof e)return null;if("string"==typeof e.message){let t=e.message.trim();if(t)return t}if("string"==typeof e.error){let t=e.error.trim();if(t)return t}if(e.details&&"object"==typeof e.details&&"message"in e.details&&"string"==typeof e.details.message){let t=e.details.message.trim();if(t)return t}return null})(N),j=(e=N)&&"object"==typeof e&&"success"in e&&"boolean"==typeof e.success?N:null;if(!g.ok||!j){let e=g.status||500,t=null!=y?y:"Upload failed (".concat(e,")"),r=j&&"step"in j?j.step:void 0,a=[t,r?"Step: ".concat(r):null].filter(Boolean).join(" ");throw Error(a)}if(!1===j.success){let e=g.status||500,t=null!=y?y:"Upload failed (".concat(e,")"),r=j.step?"Step: ".concat(j.step):null;throw Error([t,r].filter(Boolean).join(" "))}let v=(null==(i=j.file)?void 0:i.storagePath)&&j.metadataRecorded?"Stored as ".concat(j.file.storagePath,"."):!1===j.metadataRecorded?"Upload succeeded but metadata logging failed. Please check admin logs.":null,w=[null!=y?y:"Upload complete. We'll review your CAD shortly.",v].filter(Boolean).join(" ");D(null),r(f),n({}),C(!0),S(w),P(null)}catch(e){console.error(e),D(null),P(e instanceof Error?e.message:"Upload failed. Please try again."),C(!1),S(null)}finally{v(!1)}};return(0,a.jsxs)("section",{"aria-label":"Upload CAD file",className:"relative flex flex-col rounded-3xl border border-border bg-surface p-6 sm:p-8",children:[(0,a.jsxs)("div",{className:(0,i.A)("flex flex-col items-center justify-center rounded-2xl border-2 border-dashed px-6 py-10 text-center text-sm sm:px-8 sm:py-12",c?"border-accent/80 bg-accent/5":"border-border/60"),onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),g(!0)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),g(!1)},onDrop:e=>{var t;e.preventDefault(),e.stopPropagation(),g(!1);let a=null==(t=e.dataTransfer.files)?void 0:t[0];if(!a)return;let s=y(a);if(s){P(s),n(e=>({...e,file:s})),D(null),C(!1),S(null),r(e=>({...e,file:null,fileName:null}));return}_("file"),P(null),C(!1),S(null),D(null),r(e=>({...e,file:a,fileName:a.name}))},children:[(0,a.jsxs)("p",{className:"text-xs text-muted",children:[d,". Max ",h,"."]}),(0,a.jsxs)("div",{className:"mt-4 flex flex-col items-center gap-2",children:[(0,a.jsx)("label",{htmlFor:"file",className:"inline-flex cursor-pointer items-center justify-center rounded-full border border-border px-4 py-2 text-xs font-medium text-foreground transition hover:border-accent hover:text-accent",children:"Browse from device"}),(0,a.jsx)("p",{className:"text-[11px] text-muted",children:"…or drag & drop into this box"}),(0,a.jsxs)("p",{className:"mt-1 text-[11px] text-muted",children:["Selected:"," ",t.fileName?(0,a.jsxs)("span",{className:"text-foreground",children:[t.fileName,(null==(e=t.file)?void 0:e.size)?" \xb7 ".concat(N(t.file.size)):null]}):"No file selected yet"]})]}),(0,a.jsx)("input",{id:"file",name:"file",type:"file",className:"hidden",onChange:e=>{var t,a;let s=null!=(a=null==(t=e.target.files)?void 0:t[0])?a:null;if(!s)return;let i=y(s);if(i){P(i),n(e=>({...e,file:i})),D(null),C(!1),S(null),r(e=>({...e,file:null,fileName:null})),e.target.value="";return}_("file"),P(null),C(!1),S(null),D(null),r(e=>({...e,file:s,fileName:s.name}))},accept:R?void 0:o}),l.file&&(0,a.jsx)("p",{className:"mt-3 text-xs text-red-400",role:"alert",children:l.file})]}),(0,a.jsxs)("form",{onSubmit:z,className:"mt-8 space-y-5",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{htmlFor:"firstName",className:"text-xs font-medium text-muted tracking-wide",children:["First name",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"firstName",type:"text",autoComplete:"given-name",value:t.firstName,onChange:U("firstName"),className:(0,i.A)("w-full rounded-md border bg-transparent px-3 py-2 text-sm text-foreground outline-none transition",l.firstName?"border-red-500":"border-border"),"aria-invalid":!!l.firstName,"aria-describedby":l.firstName?"firstName-error":void 0}),l.firstName&&(0,a.jsx)("p",{id:"firstName-error",className:"text-xs text-red-400",children:l.firstName})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{htmlFor:"lastName",className:"text-xs font-medium text-muted tracking-wide",children:["Last name",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"lastName",type:"text",autoComplete:"family-name",value:t.lastName,onChange:U("lastName"),className:(0,i.A)("w-full rounded-md border bg-transparent px-3 py-2 text-sm text-foreground outline-none transition",l.lastName?"border-red-500":"border-border"),"aria-invalid":!!l.lastName,"aria-describedby":l.lastName?"lastName-error":void 0}),l.lastName&&(0,a.jsx)("p",{id:"lastName-error",className:"text-xs text-red-400",children:l.lastName})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{htmlFor:"email",className:"text-xs font-medium text-muted tracking-wide",children:["Business email",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"email",type:"email",autoComplete:"email",value:t.email,onChange:U("email"),className:(0,i.A)("w-full rounded-md border bg-transparent px-3 py-2 text-sm text-foreground outline-none transition",l.email?"border-red-500":"border-border"),"aria-invalid":!!l.email,"aria-describedby":l.email?"email-error":void 0}),l.email&&(0,a.jsx)("p",{id:"email-error",className:"text-xs text-red-400",children:l.email})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{htmlFor:"phone",className:"text-xs font-medium text-muted tracking-wide",children:"Phone (optional)"}),(0,a.jsx)("input",{id:"phone",type:"tel",autoComplete:"tel",value:t.phone,onChange:U("phone"),className:"w-full rounded-md border border-border bg-transparent px-3 py-2 text-sm text-foreground outline-none transition focus:border-accent"})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{htmlFor:"company",className:"text-xs font-medium text-muted tracking-wide",children:"Company"}),(0,a.jsx)("input",{id:"company",type:"text",autoComplete:"organization",value:t.company,onChange:U("company"),className:"w-full rounded-md border border-border bg-transparent px-3 py-2 text-sm text-foreground outline-none transition focus:border-accent"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{htmlFor:"manufacturingProcess",className:"text-xs font-medium text-muted tracking-wide",children:["Manufacturing process",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{id:"manufacturingProcess",value:t.manufacturingProcess,onChange:U("manufacturingProcess"),className:(0,i.A)("w-full rounded-md border bg-black/20 px-3 py-2 text-sm text-foreground outline-none transition",l.manufacturingProcess?"border-red-500":"border-border"),"aria-invalid":!!l.manufacturingProcess,"aria-describedby":l.manufacturingProcess?"manufacturingProcess-error":void 0,children:[(0,a.jsx)("option",{value:"",children:"Select a process"}),u.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),l.manufacturingProcess&&(0,a.jsx)("p",{id:"manufacturingProcess-error",className:"text-xs text-red-400",children:l.manufacturingProcess})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{htmlFor:"exportRestriction",className:"text-xs font-medium text-muted tracking-wide",children:["Export restriction",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{id:"exportRestriction",value:t.exportRestriction,onChange:U("exportRestriction"),className:(0,i.A)("w-full rounded-md border bg-black/20 px-3 py-2 text-sm text-foreground outline-none transition",l.exportRestriction?"border-red-500":"border-border"),"aria-invalid":!!l.exportRestriction,"aria-describedby":l.exportRestriction?"exportRestriction-error":void 0,children:[(0,a.jsx)("option",{value:"",children:"Select an option"}),p.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),l.exportRestriction&&(0,a.jsx)("p",{id:"exportRestriction-error",className:"text-xs text-red-400",children:l.exportRestriction})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("label",{htmlFor:"quantity",className:"text-xs font-medium text-muted tracking-wide",children:["Quantity / volumes",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{id:"quantity",type:"text",value:t.quantity,onChange:U("quantity"),placeholder:'e.g. "10 proto, 500/yr production"',className:(0,i.A)("w-full rounded-md border bg-transparent px-3 py-2 text-sm text-foreground outline-none transition",l.quantity?"border-red-500":"border-border"),"aria-invalid":!!l.quantity,"aria-describedby":l.quantity?"quantity-error":void 0}),l.quantity&&(0,a.jsx)("p",{id:"quantity-error",className:"text-xs text-red-400",children:l.quantity})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{htmlFor:"shippingPostalCode",className:"text-xs font-medium text-muted tracking-wide",children:"Shipping ZIP / Postal code"}),(0,a.jsx)("input",{id:"shippingPostalCode",type:"text",autoComplete:"postal-code",value:t.shippingPostalCode,onChange:U("shippingPostalCode"),className:(0,i.A)("w-full rounded-md border bg-transparent px-3 py-2 text-sm text-foreground outline-none transition",l.shippingPostalCode?"border-red-500":"border-border"),"aria-invalid":!!l.shippingPostalCode,"aria-describedby":l.shippingPostalCode?"shippingPostalCode-error":void 0}),l.shippingPostalCode&&(0,a.jsx)("p",{id:"shippingPostalCode-error",className:"text-xs text-red-400",children:l.shippingPostalCode})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{htmlFor:"rfqReason",className:"text-xs font-medium text-muted tracking-wide",children:"I'm submitting this RFQ because…"}),(0,a.jsxs)("select",{id:"rfqReason",value:t.rfqReason,onChange:U("rfqReason"),className:"w-full rounded-md border border-border bg-black/20 px-3 py-2 text-sm text-foreground outline-none transition focus:border-accent",children:[(0,a.jsx)("option",{value:"",children:"Select a reason (optional)"}),x.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{htmlFor:"notes",className:"text-xs font-medium text-muted tracking-wide",children:"Project details / notes"}),(0,a.jsx)("textarea",{id:"notes",rows:4,value:t.notes,onChange:U("notes"),placeholder:"Materials, tolerances, target ship date, special requirements...",className:"w-full rounded-md border border-border bg-transparent px-3 py-2 text-sm text-foreground outline-none transition focus:border-accent"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("label",{className:"flex items-start gap-3 text-sm text-foreground",children:[(0,a.jsx)("input",{id:"itarAcknowledged",type:"checkbox",checked:t.itarAcknowledged,onChange:B("itarAcknowledged"),className:(0,i.A)("mt-1 h-4 w-4 rounded border bg-transparent",l.itarAcknowledged?"border-red-500":"border-line-subtle")}),(0,a.jsx)("span",{children:"I acknowledge these parts are not subject to ITAR restrictions."})]}),l.itarAcknowledged&&(0,a.jsx)("p",{className:"text-xs text-red-400",role:"alert",children:l.itarAcknowledged}),(0,a.jsxs)("label",{className:"flex items-start gap-3 text-sm text-foreground",children:[(0,a.jsx)("input",{id:"termsAccepted",type:"checkbox",checked:t.termsAccepted,onChange:B("termsAccepted"),className:(0,i.A)("mt-1 h-4 w-4 rounded border bg-transparent",l.termsAccepted?"border-red-500":"border-line-subtle")}),(0,a.jsxs)("span",{children:["I agree to the"," ",(0,a.jsx)("a",{href:"/terms",className:"text-emerald-300 underline-offset-2 hover:underline",children:"terms of service"})," ","and"," ",(0,a.jsx)("a",{href:"/privacy",className:"text-emerald-300 underline-offset-2 hover:underline",children:"privacy policy"}),"."]})]}),l.termsAccepted&&(0,a.jsx)("p",{className:"text-xs text-red-400",role:"alert",children:l.termsAccepted})]}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)("button",{type:"submit",disabled:j||!E,className:(0,i.A)(m.n4,"mt-2 w-full px-6 py-3",j&&"cursor-wait"),"aria-busy":j,children:j?"Submitting…":"Submit RFQ"})}),(0,a.jsxs)("div",{className:"min-h-[1.25rem] pt-1",children:[w&&(0,a.jsx)("p",{className:"text-xs text-red-400",role:"alert",children:w}),!w&&F&&(0,a.jsx)("p",{className:"text-xs text-slate-400",role:"status",children:F}),!w&&!F&&A&&k&&(0,a.jsx)("p",{className:"text-xs text-emerald-400",role:"status",children:k})]})]})]})}},2821:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=function(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=function e(t){var r,a,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t)if(Array.isArray(t)){var i=t.length;for(r=0;r<i;r++)t[r]&&(a=e(t[r]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}(e))&&(a&&(a+=" "),a+=t);return a}},7275:(e,t,r)=>{"use strict";r.d(t,{m:()=>i,n4:()=>l,tJ:()=>n});let a="inline-flex items-center justify-center rounded-full font-semibold transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 disabled:cursor-not-allowed disabled:opacity-60",s={md:"px-5 py-2 text-sm",sm:"px-4 py-1.5 text-xs"},i=s,l="".concat(a," ").concat(s.md," bg-emerald-400 text-slate-950 shadow-lift-sm hover:bg-emerald-300 focus-visible:outline-emerald-300"),n="".concat(a," ").concat(s.md," border border-emerald-400/60 bg-transparent text-emerald-200 hover:bg-emerald-400/10 focus-visible:outline-emerald-400")},7399:(e,t,r)=>{Promise.resolve().then(r.bind(r,276))}},e=>{e.O(0,[441,255,358],()=>e(e.s=7399)),_N_E=e.O()}]);