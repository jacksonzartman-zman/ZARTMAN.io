(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{8792:(e,t,s)=>{Promise.resolve().then(s.bind(s,9021))},9021:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var l=s(5155),a=s(2115),n=s(5704);function c(e){let{uploads:t}=e,[s,c]=(0,a.useState)(""),r=(0,a.useMemo)(()=>{let e=s.trim().toLowerCase();return e?t.filter(t=>[t.file_name,t.file_type,t.contact_name,t.contact_email,t.company,t.notes].some(t=>!!t&&t.toLowerCase().includes(e))):t},[s,t]),x=t.length,d=r.length;return(0,l.jsxs)("section",{className:"mx-auto w-full max-w-5xl",children:[(0,l.jsxs)("header",{className:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xl font-semibold",children:"Uploads dashboard"}),(0,l.jsx)("p",{className:"text-xs text-muted",children:"Latest CAD uploads hitting Supabase."})]}),(0,l.jsxs)("div",{className:"flex flex-col items-stretch gap-2 sm:flex-row sm:items-center sm:gap-3",children:[(0,l.jsxs)("div",{className:"text-[11px] text-muted text-right sm:text-left",children:[(0,l.jsx)("span",{className:"block",children:"Admin view only"}),(0,l.jsxs)("span",{className:"block",children:["Showing ",d," of ",x]})]}),(0,l.jsx)("input",{type:"text",placeholder:"Search file, contact, company…",value:s,onChange:e=>c(e.target.value),className:"w-full rounded-full border border-border bg-input px-3 py-2 text-xs text-ink outline-none focus:border-accent focus:ring-1 focus:ring-accent sm:w-56"})]})]}),(0,l.jsx)("div",{className:"overflow-x-auto rounded-3xl border border-border bg-surface/60",children:(0,l.jsxs)("table",{className:"min-w-full border-collapse text-left",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-border bg-surface/80",children:[(0,l.jsx)("th",{className:"px-4 py-3 text-[11px] font-medium",children:"File"}),(0,l.jsx)("th",{className:"px-4 py-3 text-[11px] font-medium",children:"Contact"}),(0,l.jsx)("th",{className:"px-4 py-3 text-[11px] font-medium",children:"Company"}),(0,l.jsx)("th",{className:"px-4 py-3 text-[11px] font-medium",children:"Notes"}),(0,l.jsx)("th",{className:"px-4 py-3 text-[11px] font-medium",children:"Uploaded at"})]})}),(0,l.jsx)("tbody",{children:0===r.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:5,className:"px-4 py-8 text-center text-xs text-muted",children:"No uploads match this search."})}):r.map(e=>{var t,s,a,c,r,x;let d=e.file_path&&n.env.NEXT_PUBLIC_SUPABASE_URL?"".concat(n.env.NEXT_PUBLIC_SUPABASE_URL,"/storage/v1/object/public/").concat(e.file_path):null;return(0,l.jsxs)("tr",{className:"border-t border-border/60 hover:bg-surface/40",children:[(0,l.jsx)("td",{className:"px-4 py-3 align-top",children:(0,l.jsxs)("div",{className:"flex flex-col gap-0.5",children:[d?(0,l.jsx)("a",{href:d,target:"_blank",rel:"noreferrer",className:"font-medium text-[11px] underline-offset-2 hover:underline",children:null!=(t=e.file_name)?t:"—"}):(0,l.jsx)("span",{className:"font-medium text-[11px]",children:null!=(s=e.file_name)?s:"—"}),(0,l.jsx)("span",{className:"text-[10px] text-muted",children:null!=(a=e.file_type)?a:"unknown type"})]})}),(0,l.jsx)("td",{className:"px-4 py-3 align-top",children:(0,l.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,l.jsx)("span",{className:"text-[11px]",children:null!=(c=e.contact_name)?c:"—"}),e.contact_email?(0,l.jsx)("a",{href:"mailto:".concat(e.contact_email),className:"text-[10px] text-muted underline-offset-2 hover:underline",children:e.contact_email}):(0,l.jsx)("span",{className:"text-[10px] text-muted"})]})}),(0,l.jsx)("td",{className:"px-4 py-3 align-top text-[11px]",children:null!=(r=e.company)?r:"—"}),(0,l.jsx)("td",{className:"px-4 py-3 align-top text-[11px] max-w-xs",children:(0,l.jsx)("span",{className:"text-muted",children:null!=(x=e.notes)?x:"—"})}),(0,l.jsx)("td",{className:"px-4 py-3 align-top text-[10px] text-muted whitespace-nowrap",children:e.created_at?new Date(e.created_at).toLocaleString():"—"})]},e.id)})})]})})]})}}},e=>{e.O(0,[441,255,358],()=>e(e.s=8792)),_N_E=e.O()}]);