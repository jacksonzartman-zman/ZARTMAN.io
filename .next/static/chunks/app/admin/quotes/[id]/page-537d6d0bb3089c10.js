(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{63:(e,t,l)=>{"use strict";var r=l(7260);l.o(r,"usePathname")&&l.d(t,{usePathname:function(){return r.usePathname}}),l.o(r,"useRouter")&&l.d(t,{useRouter:function(){return r.useRouter}}),l.o(r,"useSearchParams")&&l.d(t,{useSearchParams:function(){return r.useSearchParams}})},926:(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var l in t)Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}(t,{callServer:function(){return r.callServer},createServerReference:function(){return a.createServerReference},findSourceMapURL:function(){return s.findSourceMapURL}});let r=l(1209),s=l(5153),a=l(7197)},948:(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return r.workAsyncStorageInstance}});let r=l(7828)},1150:(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let r=l(5155),s=l(2115),a=l(4437);function n(e){return{default:e&&"default"in e?e.default:e}}l(6552);let o={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},i=function(e){let t={...o,...e},l=(0,s.lazy)(()=>t.loader().then(n)),i=t.loading;function d(e){let n=i?(0,r.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,d=o?s.Suspense:s.Fragment,u=t.ssr?(0,r.jsxs)(r.Fragment,{children:[null,(0,r.jsx)(l,{...e})]}):(0,r.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(l,{...e})});return(0,r.jsx)(d,{...o?{fallback:n}:{},children:u})}return d.displayName="LoadableComponent",d}},2497:(e,t,l)=>{"use strict";l.d(t,{LA:()=>s,Zo:()=>r,mh:()=>a});let r="submitted",s={submitted:"Submitted",in_review:"In review",quoted:"Quoted",approved:"Approved",rejected:"Rejected"},a=["submitted","in_review","quoted","approved","rejected"]},2821:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});let r=function(){for(var e,t,l=0,r="",s=arguments.length;l<s;l++)(e=arguments[l])&&(t=function e(t){var l,r,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t)if(Array.isArray(t)){var a=t.length;for(l=0;l<a;l++)t[l]&&(r=e(t[l]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}(e))&&(r&&(r+=" "),r+=t);return r}},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var l in t)Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}(t,{bindSnapshot:function(){return n},createAsyncLocalStorage:function(){return a},createSnapshot:function(){return o}});let l=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class r{disable(){throw l}getStore(){}run(){throw l}exit(){throw l}enterWith(){throw l}static bind(e){return e}}let s="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function a(){return s?new s:new r}function n(e){return s?s.bind(e):r.bind(e)}function o(){return s?s.snapshot():function(e,...t){return e(...t)}}},4437:(e,t,l)=>{"use strict";function r(e){let{reason:t,children:l}=e;return l}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),l(4553)},5621:(e,t,l)=>{"use strict";l.d(t,{default:()=>f});var r=l(5155),s=l(2115),a=l(7650),n=l(2821),o=l(926);let i=(0,o.createServerReference)("60522925eb4710529d48e009cdfe80b708a9ed59c3",o.callServer,void 0,o.findSourceMapURL,"handleQuoteFormSubmit");var d=l(2497),u=l(7275);let c=["USD","EUR","GBP"],m={};function f(e){var t,l,a,n;let{quote:o}=e,[u,f]=(0,s.useActionState)(i,m);return(0,r.jsxs)("form",{className:"mt-4 space-y-4",action:f,children:[(0,r.jsx)("input",{type:"hidden",name:"id",value:o.id}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-slate-200",children:"Status"}),(0,r.jsx)("select",{id:"status",name:"status",defaultValue:null!=(t=o.status)?t:d.Zo,className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400",children:d.mh.map(e=>(0,r.jsx)("option",{value:e,children:d.LA[e]},e))})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-slate-200",children:"Price"}),(0,r.jsx)("input",{id:"price",name:"price",type:"number",step:"0.01",inputMode:"decimal",defaultValue:null!=(l=o.price)?l:"",placeholder:"0.00",className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400"})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("label",{htmlFor:"currency",className:"block text-sm font-medium text-slate-200",children:"Currency"}),(0,r.jsx)("select",{id:"currency",name:"currency",defaultValue:o.currency||"USD",className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400",children:c.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("label",{htmlFor:"target_date",className:"block text-sm font-medium text-slate-200",children:"Target date"}),(0,r.jsx)("input",{id:"target_date",name:"target_date",type:"date",defaultValue:function(e){let t=function(e){if(null==e)return null;let t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?null:t}(e);return t?t.toISOString().slice(0,10):""}(o.targetDate),className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400"})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("label",{htmlFor:"dfm_notes",className:"block text-sm font-medium text-slate-200",children:"DFM notes (visible to customer)"}),(0,r.jsx)("textarea",{id:"dfm_notes",name:"dfm_notes",defaultValue:null!=(a=o.dfmNotes)?a:"",rows:4,className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400",placeholder:"Call out manufacturability feedback you want to share"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"Customers will eventually see these notes on their quote."})]}),(0,r.jsxs)("div",{className:"space-y-1.5",children:[(0,r.jsx)("label",{htmlFor:"internal_notes",className:"block text-sm font-medium text-slate-200",children:"Internal notes"}),(0,r.jsx)("textarea",{id:"internal_notes",name:"internal_notes",defaultValue:null!=(n=o.internalNotes)?n:"",rows:4,className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400"})]}),(null==u?void 0:u.error)&&(0,r.jsx)("p",{className:"text-sm text-red-400",children:u.error}),(0,r.jsx)("div",{className:"flex flex-col gap-3 pt-1 sm:flex-row sm:justify-end",children:(0,r.jsx)(b,{})})]})}function b(){let{pending:e}=(0,a.useFormStatus)();return(0,r.jsx)("button",{type:"submit",disabled:e,className:(0,n.A)(u.n4,u.m.md,"w-full sm:w-auto"),children:e?"Saving...":"Save changes"})}},6232:(e,t,l)=>{"use strict";l.d(t,{SuccessBanner:()=>n});var r=l(5155),s=l(2115),a=l(63);function n(e){let{message:t}=e,[l,n]=(0,s.useState)(!0),o=(0,a.useRouter)(),i=(0,a.useSearchParams)(),d=(0,a.usePathname)();return((0,s.useEffect)(()=>{if(!l)return;let e=setTimeout(()=>{let e=new URLSearchParams(i.toString());e.delete("updated");let t=e.toString(),l=t?"".concat(d,"?").concat(t):d;o.replace(l,{scroll:!1}),n(!1)},4e3);return()=>clearTimeout(e)},[l,i,d,o]),l)?(0,r.jsx)("div",{className:"mb-6 rounded-md border border-emerald-500 bg-emerald-900/70 px-4 py-3 text-sm text-emerald-50",children:t}):null}},6278:(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let r=l(8140)._(l(1150));function s(e,t){var l;let s={};"function"==typeof e&&(s.loader=e);let a={...s,...t};return(0,r.default)({...a,modules:null==(l=a.loadableGenerated)?void 0:l.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6552:(e,t,l)=>{"use strict";function r(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return r}}),l(5155),l(7650),l(948),l(7278)},7275:(e,t,l)=>{"use strict";l.d(t,{m:()=>a,n4:()=>n,tJ:()=>o});let r="inline-flex items-center justify-center rounded-full font-semibold transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 disabled:cursor-not-allowed disabled:opacity-60",s={md:"px-5 py-2 text-sm",sm:"px-4 py-1.5 text-xs"},a=s,n="".concat(r," ").concat(s.md," bg-emerald-400 text-slate-950 shadow-lift-sm hover:bg-emerald-300 focus-visible:outline-emerald-300"),o="".concat(r," ").concat(s.md," border border-emerald-400/60 bg-transparent text-emerald-200 hover:bg-emerald-400/10 focus-visible:outline-emerald-400")},7828:(e,t,l)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return r}});let r=(0,l(4054).createAsyncLocalStorage)()},8256:(e,t,l)=>{"use strict";l.d(t,{QuoteMessageComposer:()=>u});var r=l(5155),s=l(2115),a=l(7650),n=l(926);let o=(0,n.createServerReference)("60b9d52c6645703ddf1e4174ed1aa9e82d10be62d5",n.callServer,void 0,n.findSourceMapURL,"postQuoteMessageAction");var i=l(7275);let d={success:!1,error:null};function u(e){let{quoteId:t}=e,l=(0,s.useRef)(null),n=(0,s.useRef)(null),[i,u]=(0,a.useFormState)(o,d);return(0,s.useEffect)(()=>{var e;i.success&&(null==(e=l.current)||e.reset(),n.current&&(n.current.value=""))},[i.success,i.messageId]),(0,r.jsxs)("form",{ref:l,action:u,className:"space-y-3",children:[(0,r.jsx)("input",{type:"hidden",name:"quote_id",value:t}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{htmlFor:"quote-message-body",className:"text-sm font-medium text-slate-200",children:"Message"}),(0,r.jsx)("textarea",{id:"quote-message-body",name:"body",ref:n,rows:4,maxLength:2e3,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none",placeholder:"Share an update or question for this quote..."})]}),i.error&&(0,r.jsx)("p",{className:"text-sm text-red-400",role:"alert","aria-live":"polite",children:i.error}),(0,r.jsx)(c,{})]})}function c(){let{pending:e}=(0,a.useFormStatus)();return(0,r.jsx)("button",{type:"submit",disabled:e,className:"".concat(i.n4," ").concat(i.m.md," w-full sm:w-auto"),children:e?"Sending...":"Send message"})}},8386:(e,t,l)=>{Promise.resolve().then(l.t.bind(l,2619,23)),Promise.resolve().then(l.bind(l,8567)),Promise.resolve().then(l.bind(l,8256)),Promise.resolve().then(l.bind(l,9867)),Promise.resolve().then(l.bind(l,5621)),Promise.resolve().then(l.bind(l,6232))},8567:(e,t,l)=>{"use strict";l.d(t,{QuoteFilesCard:()=>m});var r=l(5155),s=l(2115),a=l(2821),n=l(6278);let o=l.n(n)()(()=>Promise.all([l.e(367),l.e(989)]).then(l.bind(l,370)),{loadableGenerated:{webpack:()=>[370]},ssr:!1,loading:()=>(0,r.jsx)(d,{})});function i(e){return(0,r.jsx)(o,{...e})}function d(e){let{height:t=320}=e,l="number"==typeof t&&Number.isFinite(t)&&t>0?t:320;return(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)("div",{className:"relative overflow-hidden rounded-xl border border-slate-900/60 bg-slate-950/60",style:{height:l},children:(0,r.jsx)("div",{className:"flex h-full items-center justify-center px-6 text-center",children:(0,r.jsx)("p",{className:"text-sm text-slate-500",children:"Preparing 3D previewâ€¦"})})})})}function u(e){let{fileName:t,fileUrl:l,fallbackMessage:s,height:a=360}=e;return(0,r.jsx)(i,{src:l,fileName:t,fallbackMessage:s,height:a})}var c=l(7275);function m(e){let{files:t,id:l,className:n}=e,[o,i]=(0,s.useState)(null),d=(0,s.useMemo)(()=>{var e;return null!=(e=t.find(e=>e.id===o))?e:null},[o,t]),u=(0,s.useCallback)(()=>{i(null)},[]);return(0,s.useEffect)(()=>{o&&!t.some(e=>e.id===o)&&i(null)},[o,t]),(0,r.jsxs)("section",{id:l,className:(0,a.A)("rounded-2xl border border-slate-800 bg-slate-950/60 px-5 py-4",n),children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Files"}),(0,r.jsx)("p",{className:"text-sm text-slate-400",children:"Click a file to open the 3D preview modal."})]}),(0,r.jsxs)("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:[t.length," attached"]})]}),(0,r.jsx)("div",{className:"mt-4 space-y-2",children:0===t.length?(0,r.jsx)("p",{className:"rounded-xl border border-dashed border-slate-900/70 bg-black/20 px-4 py-5 text-sm text-slate-500",children:"No files listed."}):t.map(e=>{var t;return(0,r.jsxs)("button",{type:"button",onClick:()=>i(e.id),className:"group flex w-full items-center justify-between rounded-xl border border-slate-900/60 bg-slate-950/20 px-4 py-3 text-left transition hover:border-slate-800 hover:bg-slate-900/30 focus-visible:outline focus-visible:outline-2 focus-visible:outline-emerald-400/70",children:[(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("p",{className:"truncate text-sm font-medium text-slate-100",children:e.label}),(0,r.jsx)("p",{className:"mt-0.5 text-xs text-slate-500",children:e.signedUrl?"Interactive STL available":null!=(t=e.fallbackMessage)?t:"Preview not available yet"})]}),(0,r.jsx)("span",{className:(0,a.A)(c.tJ,c.m.sm,"whitespace-nowrap",!e.signedUrl&&"opacity-70"),children:"View model"})]},e.id)})}),d&&(0,r.jsx)(f,{file:d,onClose:u})]})}function f(e){var t;let{file:l,onClose:n}=e,o=(0,s.useRef)(null),i=(0,s.useRef)(null);return(0,s.useEffect)(()=>{var e,t;i.current=null!=(t=document.activeElement)?t:null,null==(e=o.current)||e.focus()},[]),(0,s.useEffect)(()=>{let e=e=>{"Escape"===e.key&&(e.preventDefault(),n())};return window.addEventListener("keydown",e),()=>{var t;window.removeEventListener("keydown",e),null==(t=i.current)||t.focus()}},[n]),(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-8",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-slate-950/80 backdrop-blur-sm",onClick:n,"aria-hidden":"true"}),(0,r.jsxs)("div",{ref:o,role:"dialog","aria-modal":"true","aria-label":"Preview for ".concat(l.label),tabIndex:-1,className:"relative z-10 w-full max-w-3xl rounded-3xl border border-slate-800 bg-slate-950/95 shadow-2xl outline-none",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between border-b border-slate-900 px-6 py-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"File preview"}),(0,r.jsx)("h3",{className:"mt-1 text-lg font-semibold text-slate-50",children:l.label})]}),(0,r.jsx)("button",{type:"button",onClick:n,className:"rounded-full border border-slate-800 bg-slate-900/70 p-2 text-slate-400 transition hover:text-slate-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-emerald-400/70","aria-label":"Close preview",children:(0,r.jsx)("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",children:(0,r.jsx)("path",{d:"M5 5l10 10M15 5L5 15",stroke:"currentColor",strokeWidth:1.6,strokeLinecap:"round"})})})]}),(0,r.jsx)("div",{className:"px-6 py-6",children:(0,r.jsx)(u,{fileName:null!=(t=l.fileName)?t:l.label,fileUrl:l.signedUrl,fallbackMessage:l.fallbackMessage})}),(0,r.jsx)("div",{className:"flex justify-end gap-3 border-t border-slate-900 px-6 py-4",children:(0,r.jsx)("button",{type:"button",onClick:n,className:(0,a.A)(c.tJ,c.m.sm),children:"Close"})})]})]})}},9867:(e,t,l)=>{"use strict";l.d(t,{QuoteWorkspaceTabs:()=>n});var r=l(5155),s=l(2115),a=l(2821);function n(e){var t,l,n,o;let{tabs:i,defaultTab:d="summary"}=e,u=(0,s.useId)(),[c,m]=(0,s.useState)(null!=(o=null!=(n=null==(t=i.find(e=>e.id===d))?void 0:t.id)?n:null==(l=i[0])?void 0:l.id)?o:"summary"),f=(0,s.useMemo)(()=>i.filter((e,t,l)=>e&&"string"==typeof e.id&&l.findIndex(t=>t.id===e.id)===t),[i]);return 0===f.length?null:(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsx)("div",{className:"overflow-x-auto pb-1",children:(0,r.jsx)("div",{className:"flex min-w-max gap-2",role:"tablist","aria-label":"Quote workspace navigation",children:f.map(e=>{let t=e.id===c,l="".concat(u,"-tab-").concat(e.id),s="".concat(u,"-panel-").concat(e.id);return(0,r.jsxs)("button",{id:l,type:"button",role:"tab","aria-selected":t,"aria-controls":s,onClick:()=>m(e.id),className:(0,a.A)("rounded-full border px-3 py-1 text-xs font-semibold transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-400",t?"border-emerald-400 bg-emerald-500/20 text-emerald-100 shadow-[0_0_25px_rgba(16,185,129,0.25)]":"border-slate-800 bg-slate-900/70 text-slate-300 hover:border-emerald-400 hover:text-emerald-100"),children:[(0,r.jsx)("span",{children:e.label}),"number"==typeof e.count&&(0,r.jsx)("span",{className:(0,a.A)("ml-2 rounded-full border px-2 py-0.5 text-[10px]",t?"border-transparent bg-slate-900/40 text-emerald-100/80":"border-slate-800 bg-slate-950/70 text-slate-400"),children:e.count})]},e.id)})})}),(0,r.jsx)("div",{children:f.map(e=>{let t=e.id===c,l="".concat(u,"-panel-").concat(e.id),s="".concat(u,"-tab-").concat(e.id);return(0,r.jsx)("div",{id:l,role:"tabpanel","aria-labelledby":s,className:(0,a.A)("space-y-4",t?"block":"hidden"),"aria-hidden":!t,children:e.content},e.id)})})]})}}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=8386)),_N_E=e.O()}]);