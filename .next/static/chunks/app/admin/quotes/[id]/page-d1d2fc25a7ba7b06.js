(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{1824:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var l=s(5155),a=s(7650),r=s(2821),d=s(8799);let o={submitted:"RFQ submitted",in_review:"In review",quoted:"Quote prepared",approved:"Approved",won:"Won",lost:"Lost",cancelled:"Cancelled"};var n=s(7275),i=s(926);let c=(0,i.createServerReference)("70be1faf75c74e0a2fe0dedf53942061e0bcd994b1",i.callServer,void 0,i.findSourceMapURL,"submitAdminQuoteUpdateAction"),m=["USD","EUR","GBP"],u=["submitted","in_review","quoted","approved","won","lost","cancelled"].map(e=>({value:e,label:o[e]})),x={ok:!0,message:""};function p(e){var t,s,r,o;let{quote:n}=e,i=c.bind(null,n.id),[p,h]=(0,a.useFormState)(i,x);return(0,l.jsxs)("form",{className:"mt-4 space-y-4",action:h,children:[(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-slate-200",children:"Status"}),(0,l.jsx)("select",{id:"status",name:"status",defaultValue:function(e){let t=(null!=e?e:"").toLowerCase().trim();return"in_review"===t?"in_review":"quoted"===t?"quoted":"approved"===t?"approved":"won"===t?"won":"lost"===t?"lost":"cancelled"===t||"canceled"===t?"cancelled":"submitted"}(null!=(t=n.status)?t:"submitted"),className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400",children:u.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-slate-200",children:"Price"}),(0,l.jsx)("input",{id:"price",name:"price",type:"number",step:"0.01",inputMode:"decimal",defaultValue:null!=(s=n.price)?s:"",placeholder:"0.00",className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400"})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{htmlFor:"currency",className:"block text-sm font-medium text-slate-200",children:"Currency"}),(0,l.jsx)("select",{id:"currency",name:"currency",defaultValue:n.currency||"USD",className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400",children:m.map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{htmlFor:"targetDate",className:"block text-sm font-medium text-slate-200",children:"Target date"}),(0,l.jsx)("input",{id:"targetDate",name:"targetDate",type:"date",defaultValue:(0,d.l)(n.targetDate),className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400"})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{htmlFor:"dfmNotes",className:"block text-sm font-medium text-slate-200",children:"DFM notes (visible to customer)"}),(0,l.jsx)("textarea",{id:"dfmNotes",name:"dfmNotes",defaultValue:null!=(r=n.dfmNotes)?r:"",rows:4,className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400",placeholder:"Call out manufacturability feedback you want to share"}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Customers will eventually see these notes on their quote."})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{htmlFor:"internalNotes",className:"block text-sm font-medium text-slate-200",children:"Internal notes"}),(0,l.jsx)("textarea",{id:"internalNotes",name:"internalNotes",defaultValue:null!=(o=n.internalNotes)?o:"",rows:4,className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400"})]}),!p.ok&&p.error&&(0,l.jsx)("p",{className:"text-sm text-red-400",children:p.error}),p.ok&&p.message&&(0,l.jsx)("p",{className:"text-sm text-emerald-300",children:p.message}),(0,l.jsx)("div",{className:"flex flex-col gap-3 pt-1 sm:flex-row sm:justify-end",children:(0,l.jsx)(b,{})})]})}function b(){let{pending:e}=(0,a.useFormStatus)();return(0,l.jsx)("button",{type:"submit",disabled:e,className:(0,r.A)(n.n4,n.m.md,"w-full sm:w-auto"),children:e?"Saving...":"Save changes"})}},5865:(e,t,s)=>{"use strict";s.d(t,{AdminQuoteProjectCard:()=>u});var l=s(5155),a=s(2821),r=s(2115),d=s(7650),o=s(7275),n=s(926);let i=(0,n.createServerReference)("70c4581414c15c4c8ad89d85cec748e757b41c23e8",n.callServer,void 0,n.findSourceMapURL,"submitAdminQuoteProjectAction");var c=s(8799);let m={ok:!0};function u(e){var t,s,o,n,u;let{quoteId:b,project:h,projectUnavailable:f=!1,className:j}=e,[g,N]=(0,r.useState)(!1),y=(0,r.useMemo)(()=>i.bind(null,b),[b]),[v,w]=(0,d.useFormState)(y,m),k=(0,r.useMemo)(()=>(function(e){var t,s,l,a,r;let d=null!=e?e:m;return{ok:d.ok,message:null!=(a=d.message)?a:"",error:null!=(r=d.error)?r:"",fieldErrors:{poNumber:null==(t=d.fieldErrors)?void 0:t.poNumber,targetShipDate:null==(s=d.fieldErrors)?void 0:s.targetShipDate,notes:null==(l=d.fieldErrors)?void 0:l.notes}}})(v),[v]),S=g&&!k.ok&&!!k.error,_=g&&k.ok&&!!k.message,F=g&&!k.ok,P=(null==h?void 0:h.target_ship_date)?h.target_ship_date.slice(0,10):"",C=(null==h?void 0:h.target_ship_date)?null!=(t=(0,c.r)(h.target_ship_date))?t:h.target_ship_date:"",R=null!=(s=null==h?void 0:h.notes)?s:"",E=!h&&!f;return(0,l.jsxs)("section",{className:(0,a.A)(j,"space-y-4"),children:[(0,l.jsxs)("header",{className:"space-y-1",children:[(0,l.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Project kickoff"}),(0,l.jsx)("h2",{className:"text-lg font-semibold text-slate-100",children:"Customer PO + target ship date"}),(0,l.jsx)("p",{className:"text-sm text-slate-400",children:"Capture the handoff metadata the moment a quote is marked Won. The customer and winning supplier see these details."})]}),f?(0,l.jsx)("p",{className:"rounded-xl border border-yellow-500/30 bg-yellow-500/10 px-3 py-2 text-xs text-yellow-100",children:"Project details are temporarily unavailable."}):null,(0,l.jsxs)("dl",{className:"grid gap-3 text-sm text-slate-200 sm:grid-cols-2",children:[(0,l.jsx)(x,{label:"PO number",value:null!=(o=null==h?void 0:h.po_number)?o:null,placeholder:"Pending"}),(0,l.jsx)(x,{label:"Target ship date",value:C||null,placeholder:"Not set"}),(0,l.jsx)(x,{label:"Kickoff notes",value:null!=(n=null==h?void 0:h.notes)?n:null,placeholder:"No kickoff notes yet.",multiline:!0,className:"sm:col-span-2"})]}),(0,l.jsxs)("form",{action:e=>(N(!0),w(e)),className:"space-y-3",children:[E?(0,l.jsx)("p",{className:"text-xs text-slate-400",children:"No kickoff details saved yet. Capture the PO number, target ship date, and any notes as soon as the quote is awarded."}):null,_&&k.message?(0,l.jsx)("p",{className:"rounded-xl border border-emerald-500/30 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-100",children:k.message}):null,S&&k.error?(0,l.jsx)("p",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:k.error}):null,(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{htmlFor:"admin-project-po",className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"PO number"}),(0,l.jsx)("input",{id:"admin-project-po",name:"poNumber",type:"text",maxLength:100,defaultValue:null!=(u=null==h?void 0:h.po_number)?u:"",disabled:f,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60",placeholder:"PO-12345"}),F&&k.fieldErrors.poNumber?(0,l.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:k.fieldErrors.poNumber}):null]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{htmlFor:"admin-project-target-date",className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Target ship date"}),(0,l.jsx)("input",{id:"admin-project-target-date",name:"targetShipDate",type:"date",defaultValue:P,disabled:f,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60"}),F&&k.fieldErrors.targetShipDate?(0,l.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:k.fieldErrors.targetShipDate}):null]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{htmlFor:"admin-project-notes",className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Kickoff notes"}),(0,l.jsx)("textarea",{id:"admin-project-notes",name:"notes",rows:4,defaultValue:R,maxLength:2e3,disabled:f,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60",placeholder:"Share packaging, address, or handoff context customers and suppliers should remember."}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Customers can edit these details, and the winning supplier sees them in read-only mode."}),F&&k.fieldErrors.notes?(0,l.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:k.fieldErrors.notes}):null]}),(0,l.jsx)(p,{disabled:f})]})]})}function x(e){let{label:t,value:s,placeholder:a="â€”",multiline:r=!1,className:d=""}=e,o="string"==typeof s&&s.trim().length>0?s:a,n=[r?"whitespace-pre-line text-sm font-normal":"font-medium","text-slate-100"].join(" ");return(0,l.jsxs)("div",{className:"rounded-xl border border-slate-900/60 bg-slate-950/30 px-3 py-2 ".concat(d).trim(),children:[(0,l.jsx)("dt",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:t}),(0,l.jsx)("dd",{className:n,children:o})]})}function p(e){let{disabled:t}=e,{pending:s}=(0,d.useFormStatus)();return(0,l.jsx)("button",{type:"submit",disabled:s||t,className:"".concat(o.n4," ").concat(o.m.sm),children:s?"Saving...":"Save project details"})}},8373:(e,t,s)=>{"use strict";s.d(t,{AdminQuoteMessagesCard:()=>u});var l=s(5155),a=s(2115),r=s(7650),d=s(8799),o=s(7275),n=s(926);let i=(0,n.createServerReference)("70bfa315420e4dde4deecb6b5b2dfa995aa077aba7",n.callServer,void 0,n.findSourceMapURL,"submitAdminQuoteMessageAction"),c={ok:!0},m={customer:"Customer",admin:"Zartman.io",supplier:"Supplier"};function u(e){let{quoteId:t,messages:s,messagesUnavailable:d=!1}=e,o=(0,a.useRef)(null),n=(0,a.useRef)(null),m=(0,a.useMemo)(()=>i.bind(null,t),[t]),[u,b]=(0,r.useFormState)(m,c);(0,a.useEffect)(()=>{var e;u.ok&&u.message&&(null==(e=o.current)||e.reset(),n.current&&(n.current.value=""))},[u.ok,u.message]);let h=s.length>0;return(0,l.jsxs)("section",{className:"space-y-4 rounded-2xl border border-slate-900 bg-slate-950/60 p-4",children:[(0,l.jsxs)("header",{className:"space-y-1",children:[(0,l.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Customer messages"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-white",children:"Customer messages"}),(0,l.jsx)("p",{className:"text-sm text-slate-400",children:"Use this thread to keep RFQ context in one place."})]})]}),d?(0,l.jsx)("p",{className:"rounded-xl border border-yellow-500/30 bg-yellow-500/5 px-3 py-2 text-sm text-yellow-100",children:"Messages are temporarily unavailable. Refresh to try again."}):null,(0,l.jsx)(x,{messages:s,hasMessages:h}),(0,l.jsxs)("div",{className:"space-y-3 border-t border-slate-900/60 pt-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-semibold text-slate-100",children:"Reply"}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Visible to the requesting customer and Zartman admins."})]}),(0,l.jsx)(p,{ref:o,textareaRef:n,onSubmit:b,state:u,disabled:d})]})]})}function x(e){let{messages:t,hasMessages:s}=e;return s?(0,l.jsx)("ol",{className:"space-y-3",children:t.map(e=>{var t,s;return(0,l.jsxs)("li",{className:"rounded-2xl border border-slate-900/70 bg-slate-950/40 px-4 py-3",children:[(0,l.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-slate-400",children:[(0,l.jsx)("span",{className:"font-semibold text-slate-100",children:null!=(t=m[e.author_type])?t:m.admin}),(0,l.jsx)("span",{children:null!=(s=(0,d.r)(e.created_at,{includeTime:!0}))?s:""})]}),(0,l.jsx)("p",{className:"mt-2 whitespace-pre-wrap text-sm leading-relaxed text-slate-100",children:e.body})]},e.id)})}):(0,l.jsx)("p",{className:"rounded-2xl border border-dashed border-slate-800/70 bg-black/30 px-4 py-4 text-sm text-slate-400",children:"No messages yet. Reply here to keep the customer looped in."})}let p=(0,a.forwardRef)((e,t)=>{var s;let{onSubmit:a,state:r,disabled:d=!1,textareaRef:o}=e,n=null==(s=r.fieldErrors)?void 0:s.body,i=r.ok&&!!r.message;return(0,l.jsxs)("form",{ref:t,action:a,className:"space-y-3",children:[i?(0,l.jsx)("p",{className:"rounded-xl border border-emerald-500/40 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-100",children:r.message}):null,!r.ok&&r.error?(0,l.jsx)("p",{className:"rounded-xl border border-red-500/30 bg-red-500/10 px-3 py-2 text-sm text-red-200",children:r.error}):null,(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{htmlFor:"admin-quote-message-body",className:"text-sm font-medium text-slate-200",children:"Message"}),(0,l.jsx)("textarea",{id:"admin-quote-message-body",name:"body",ref:o,rows:4,maxLength:2e3,disabled:d,className:"w-full rounded-lg border border-slate-800 bg-black/30 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none disabled:cursor-not-allowed disabled:opacity-60",placeholder:"Share an update or ask a follow-up question..."}),n?(0,l.jsx)("p",{className:"text-sm text-red-300",role:"alert",children:n}):null]}),(0,l.jsx)(b,{disabled:d})]})});function b(e){let{disabled:t}=e,{pending:s}=(0,r.useFormStatus)();return(0,l.jsx)("button",{type:"submit",disabled:s||t,className:"".concat(o.n4," ").concat(o.m.md," w-full sm:w-auto"),children:s?"Sending...":"Reply"})}p.displayName="AdminQuoteMessageComposerForm"},9317:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2619,23)),Promise.resolve().then(s.bind(s,8373)),Promise.resolve().then(s.bind(s,5865)),Promise.resolve().then(s.bind(s,8567)),Promise.resolve().then(s.bind(s,9867)),Promise.resolve().then(s.bind(s,1824))}},e=>{e.O(0,[619,299,441,255,358],()=>e(e.s=9317)),_N_E=e.O()}]);