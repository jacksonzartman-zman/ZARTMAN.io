(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{383:(e,t,s)=>{"use strict";s.d(t,{QuoteMessageComposer:()=>o});var l=s(5155),a=s(2115),r=s(7650),n=s(926);let d=(0,n.createServerReference)("6026c99b1d4348c4c9d11d6d11377c91adf2991611",n.callServer,void 0,n.findSourceMapURL,"postQuoteMessageAction");var c=s(7275);let i={success:!1,error:null};function o(e){let{quoteId:t}=e,s=(0,a.useRef)(null),n=(0,a.useRef)(null),[c,o]=(0,r.useFormState)(d,i);return(0,a.useEffect)(()=>{var e;c.success&&(null==(e=s.current)||e.reset(),n.current&&(n.current.value=""))},[c.success,c.messageId]),(0,l.jsxs)("form",{ref:s,action:o,className:"space-y-3",children:[(0,l.jsx)("input",{type:"hidden",name:"quote_id",value:t}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{htmlFor:"quote-message-body",className:"text-sm font-medium text-slate-200",children:"Message"}),(0,l.jsx)("textarea",{id:"quote-message-body",name:"body",ref:n,rows:4,maxLength:2e3,className:"w-full rounded-lg border border-slate-800 bg-black/40 px-3 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-emerald-400 focus:outline-none",placeholder:"Share an update or question for this quote..."})]}),c.error&&(0,l.jsx)("p",{className:"text-sm text-red-400",role:"alert","aria-live":"polite",children:c.error}),(0,l.jsx)(u,{})]})}function u(){let{pending:e}=(0,r.useFormStatus)();return(0,l.jsx)("button",{type:"submit",disabled:e,className:"".concat(c.n4," ").concat(c.m.md," w-full sm:w-auto"),children:e?"Sending...":"Send message"})}},1764:(e,t,s)=>{"use strict";s.d(t,{default:()=>b});var l=s(5155),a=s(7650),r=s(2821),n=s(8799);let d={submitted:"RFQ submitted",in_review:"In review",quoted:"Quote prepared",won:"Won",lost:"Lost",cancelled:"Cancelled"};var c=s(7275),i=s(926);let o=(0,i.createServerReference)("70a972959373fe1fa74b3751f5aaededb89ae70b58",i.callServer,void 0,i.findSourceMapURL,"submitAdminQuoteUpdateAction"),u=["USD","EUR","GBP"],m=["submitted","in_review","quoted","won","lost","cancelled"].map(e=>({value:e,label:d[e]})),x={ok:!0,message:""};function b(e){var t,s,r,d;let{quote:c}=e,i=o.bind(null,c.id),[b,f]=(0,a.useFormState)(i,x);return(0,l.jsxs)("form",{className:"mt-4 space-y-4",action:f,children:[(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-slate-200",children:"Status"}),(0,l.jsx)("select",{id:"status",name:"status",defaultValue:function(e){let t=(null!=e?e:"").toLowerCase().trim();return"in_review"===t?"in_review":"quoted"===t?"quoted":"won"===t?"won":"lost"===t?"lost":"cancelled"===t||"canceled"===t?"cancelled":"submitted"}(null!=(t=c.status)?t:"submitted"),className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400",children:m.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{htmlFor:"price",className:"block text-sm font-medium text-slate-200",children:"Price"}),(0,l.jsx)("input",{id:"price",name:"price",type:"number",step:"0.01",inputMode:"decimal",defaultValue:null!=(s=c.price)?s:"",placeholder:"0.00",className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400"})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{htmlFor:"currency",className:"block text-sm font-medium text-slate-200",children:"Currency"}),(0,l.jsx)("select",{id:"currency",name:"currency",defaultValue:c.currency||"USD",className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400",children:u.map(e=>(0,l.jsx)("option",{value:e,children:e},e))})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{htmlFor:"targetDate",className:"block text-sm font-medium text-slate-200",children:"Target date"}),(0,l.jsx)("input",{id:"targetDate",name:"targetDate",type:"date",defaultValue:(0,n.l)(c.targetDate),className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400"})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{htmlFor:"dfmNotes",className:"block text-sm font-medium text-slate-200",children:"DFM notes (visible to customer)"}),(0,l.jsx)("textarea",{id:"dfmNotes",name:"dfmNotes",defaultValue:null!=(r=c.dfmNotes)?r:"",rows:4,className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400",placeholder:"Call out manufacturability feedback you want to share"}),(0,l.jsx)("p",{className:"text-xs text-slate-500",children:"Customers will eventually see these notes on their quote."})]}),(0,l.jsxs)("div",{className:"space-y-1.5",children:[(0,l.jsx)("label",{htmlFor:"internalNotes",className:"block text-sm font-medium text-slate-200",children:"Internal notes"}),(0,l.jsx)("textarea",{id:"internalNotes",name:"internalNotes",defaultValue:null!=(d=c.internalNotes)?d:"",rows:4,className:"w-full rounded-md border border-slate-700 bg-black/40 px-3 py-2 text-sm text-slate-100 outline-none focus:border-emerald-400"})]}),!b.ok&&b.error&&(0,l.jsx)("p",{className:"text-sm text-red-400",children:b.error}),b.ok&&b.message&&(0,l.jsx)("p",{className:"text-sm text-emerald-300",children:b.message}),(0,l.jsx)("div",{className:"flex flex-col gap-3 pt-1 sm:flex-row sm:justify-end",children:(0,l.jsx)(p,{})})]})}function p(){let{pending:e}=(0,a.useFormStatus)();return(0,l.jsx)("button",{type:"submit",disabled:e,className:(0,r.A)(c.n4,c.m.md,"w-full sm:w-auto"),children:e?"Saving...":"Save changes"})}},3385:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2619,23)),Promise.resolve().then(s.bind(s,8567)),Promise.resolve().then(s.bind(s,383)),Promise.resolve().then(s.bind(s,9867)),Promise.resolve().then(s.bind(s,4606)),Promise.resolve().then(s.bind(s,1764))},4606:(e,t,s)=>{"use strict";s.d(t,{SupplierBidsCard:()=>u});var l=s(5155),a=s(7650),r=s(7344),n=s(8799),d=s(926);let c=(0,d.createServerReference)("708d0c2dff41d2a0e3bac7dfcdcd2fc7d656432f46",d.callServer,void 0,d.findSourceMapURL,"submitSelectWinningBidAction"),i=(0,d.createServerReference)("7f74267e99b1e6eb4c693da93653bdc0592d2d170c",d.callServer,void 0,d.findSourceMapURL,"initialAdminSelectWinningBidState"),o=["won","lost","cancelled"];function u(e){let{quoteId:t,quoteStatus:s,bids:d,bidsLoaded:u,errorMessage:x}=e,b=c.bind(null,t),[p,f]=(0,a.useFormState)(b,i),h=o.includes(s),N=p.ok&&!!p.message,j=!p.ok&&!!p.error;return(0,l.jsxs)("section",{className:"mt-8 rounded-2xl border border-slate-900 bg-slate-950/40 p-4",children:[(0,l.jsxs)("div",{className:"mb-3 flex items-center justify-between gap-2",children:[(0,l.jsx)("h2",{className:"text-sm font-semibold text-slate-100",children:"Supplier bids"}),u?null:(0,l.jsx)("span",{className:"text-xs text-slate-400",children:"We had trouble loading bids. Check logs and try again."})]}),N?(0,l.jsx)("p",{className:"mb-3 rounded-lg border border-emerald-500/40 bg-emerald-500/10 px-3 py-2 text-xs font-medium text-emerald-200",children:p.message}):null,j?(0,l.jsx)("p",{className:"mb-3 rounded-lg border border-red-500/40 bg-red-500/10 px-3 py-2 text-xs font-medium text-red-200",children:p.error}):null,x&&u?(0,l.jsx)("p",{className:"text-xs text-slate-400",children:x}):null,u&&0===d.length?(0,l.jsx)("p",{className:"text-xs text-slate-400",children:"No bids have been submitted for this quote yet."}):null,u&&d.length>0?(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full text-left text-xs text-slate-200",children:[(0,l.jsx)("thead",{className:"border-b border-slate-800 text-[11px] uppercase tracking-wide text-slate-400",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"py-2 pr-3",children:"Supplier"}),(0,l.jsx)("th",{className:"py-2 pr-3",children:"Amount"}),(0,l.jsx)("th",{className:"py-2 pr-3",children:"Lead time"}),(0,l.jsx)("th",{className:"py-2 pr-3",children:"Status"}),(0,l.jsx)("th",{className:"py-2 pr-3",children:"Submitted"}),(0,l.jsx)("th",{className:"py-2 pr-3 text-right",children:"Action"})]})}),(0,l.jsx)("tbody",{children:d.map(e=>{var t;let s="number"==typeof e.amount?(0,r.v)(e.amount,e.currency,{maximumFractionDigits:2}):"—",a=e.created_at?(0,n.r)(e.created_at):"—",d=(null!=(t=e.status)?t:"submitted").toString(),c="won"===d.toLowerCase();return(0,l.jsxs)("tr",{className:"border-b border-slate-900/60 last:border-0",children:[(0,l.jsx)("td",{className:"py-2 pr-3",children:(0,l.jsx)("span",{className:"font-mono text-[11px] text-slate-400",children:e.supplier_id})}),(0,l.jsxs)("td",{className:"py-2 pr-3",children:[s,e.currency?(0,l.jsx)("span",{className:"ml-1 text-[11px] text-slate-400",children:e.currency}):null]}),(0,l.jsx)("td",{className:"py-2 pr-3",children:"number"==typeof e.lead_time_days?"".concat(e.lead_time_days," day").concat(1===e.lead_time_days?"":"s"):"—"}),(0,l.jsx)("td",{className:"py-2 pr-3",children:(0,l.jsx)("span",{className:"inline-flex rounded-full bg-slate-800/60 px-2 py-0.5 text-[11px] capitalize",children:d})}),(0,l.jsx)("td",{className:"py-2 pr-3",children:a}),(0,l.jsx)("td",{className:"py-2 pr-3",children:c?(0,l.jsx)("span",{className:"inline-flex items-center justify-end rounded-full bg-emerald-500/10 px-2 py-0.5 text-[11px] font-semibold text-emerald-200",children:"Winner"}):h||c?null:(0,l.jsxs)("form",{action:f,className:"flex justify-end",children:[(0,l.jsx)("input",{type:"hidden",name:"bidId",value:e.id}),(0,l.jsx)(m,{})]})})]},e.id)})})]})}):null]})}function m(){let{pending:e}=(0,a.useFormStatus)();return(0,l.jsx)("button",{type:"submit",disabled:e,className:"text-xs font-medium text-emerald-300 transition hover:text-emerald-200 disabled:cursor-not-allowed disabled:text-slate-500",children:e?"Selecting...":"Mark as winner"})}},7344:(e,t,s)=>{"use strict";function l(e,t,s){var l,a;if("number"!=typeof e||Number.isNaN(e))return"—";let r=(null!=t?t:"USD").toUpperCase(),n=null!=(l=null==s?void 0:s.maximumFractionDigits)?l:0,d=null!=(a=null==s?void 0:s.minimumFractionDigits)?a:n;try{return new Intl.NumberFormat("en-US",{style:"currency",currency:r,minimumFractionDigits:d,maximumFractionDigits:n}).format(e)}catch(s){let t=Math.max(d,n);return"".concat(r," ").concat(e.toFixed(t))}}s.d(t,{v:()=>l})},8799:(e,t,s)=>{"use strict";s.d(t,{l:()=>n,r:()=>r});let l="en-US";function a(e){if(null==e)return null;let t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?null:t}function r(e){let{includeTime:t=!1,fallback:s="—"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a(e);if(!r)return s;let n=r.toLocaleDateString(l,{month:"short",day:"numeric",year:"numeric"});if(!t)return n;let d=r.toLocaleTimeString(l,{hour:"numeric",minute:"2-digit"});return"".concat(n," \xb7 ").concat(d)}function n(e){let t=a(e);return t?t.toISOString().slice(0,10):""}}},e=>{e.O(0,[619,264,441,255,358],()=>e(e.s=3385)),_N_E=e.O()}]);