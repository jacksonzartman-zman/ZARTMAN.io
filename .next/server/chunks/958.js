exports.id=958,exports.ids=[958],exports.modules={3440:(a,b,c)=>{"use strict";c.d(b,{j1:()=>f,z1:()=>g});var d=c(64811);let e=new Set(["submitted","in_review","quoted"]);function f(a,b,c){let e=(0,d.u_)(b);return!!e&&!!c&&("customer"===a?function(a,b){if(h([b.email,b.customer_email,...b.customerEmails??[],...b.allowedCustomerEmails??[]]).has(a))return!0;let c=a.split("@")[1];return!!c&&(function(a){let b=new Set;return a.forEach(a=>{if(!a)return;let c=a.trim().toLowerCase().replace(/^@/,"");c.includes(".")&&b.add(c)}),b})([b.customerDomain,b.orgDomain,...b.allowedCustomerDomains??[]]).has(c)}(e,c):"supplier"===a&&function(a,b){if(h([b.assigned_supplier_email,b.assignedSupplierEmail,...b.allowedSupplierEmails??[],...i(b.assignments),...i(b.supplierAssignments)]).has(a))return!0;let c=h(b.supplierContext?.verifiedEmails??[]);if(b.supplierContext?.verifiedAccess&&c.has(a))return!0;let e=(0,d.u_)(b.email??null);return!!e&&e===a}(e,c))}function g(a,b){if("supplier"!==a||!b||!1===b.accessGranted||!1===b.allowBids||!0===b.bidLocked)return!1;let c=j(b.status);return(!c||!!e.has(c))&&"accepted"!==j(b.existingBidStatus)}function h(a){let b=new Set;return a.forEach(a=>{let c=(0,d.u_)(a??null);c&&b.add(c)}),b}function i(a){return a&&0!==a.length?a.map(a=>a?.supplier_email??a?.email??null):[]}function j(a){return a?a.trim().toLowerCase():null}},11802:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},12831:(a,b,c)=>{"use strict";c.d(b,{E2:()=>i,qr:()=>h,w9:()=>j});var d=c(36464);let e=process.env.SUPABASE_URL??"https://qslztdkptpklopyedkfd.supabase.co/",f="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFzbHp0ZGtwdHBrbG9weWVka2ZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM0MTYzMzksImV4cCI6MjA3ODk5MjMzOX0.et6RdF18ioinJKYNNTE0UVA5HvRH1YaXmA2DgRHLPWo",g=process.env.SUPABASE_SERVICE_ROLE_KEY;if(!e)throw Error("SUPABASE_URL or NEXT_PUBLIC_SUPABASE_URL is required (check your env vars).");let h=()=>{if(!f)throw Error("NEXT_PUBLIC_SUPABASE_ANON_KEY is required");return(0,d.UU)(e,f,{auth:{persistSession:!1}})},i=()=>{if(!g)throw Error("SUPABASE_SERVICE_ROLE_KEY is required");return(0,d.UU)(e,g,{auth:{persistSession:!1}})},j=i()},26261:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,3991,23)),Promise.resolve().then(c.bind(c,91331))},32999:(a,b,c)=>{"use strict";c.d(b,{m:()=>f,n4:()=>g,tJ:()=>h});let d="inline-flex items-center justify-center rounded-full font-semibold transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 disabled:cursor-not-allowed disabled:opacity-60",e={md:"px-5 py-2 text-sm",sm:"px-4 py-1.5 text-xs"},f=e,g=`${d} ${e.md} bg-emerald-400 text-slate-950 shadow-lift-sm hover:bg-emerald-300 focus-visible:outline-emerald-300`,h=`${d} ${e.md} border border-emerald-400/60 bg-transparent text-emerald-200 hover:bg-emerald-400/10 focus-visible:outline-emerald-400`},35989:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,65169,23)),Promise.resolve().then(c.bind(c,71281))},51970:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},61135:()=>{},64811:(a,b,c)=>{"use strict";async function d(a){if(void 0!==a)return await a}function e(a,b){var c;if(!a)return;if(c=a,"function"==typeof c?.get)return a.get(b)??void 0;let d=a[b];return Array.isArray(d)?d[0]:d}function f(a){if(!a)return null;let b=a.trim().toLowerCase();return b.length>0?b:null}function g(a){return a?a.startsWith("Q-")?a:`#${a.slice(0,6)}`:"Quote"}function h(a){return Array.isArray(a)?a[0]:a??void 0}c.d(b,{Ol:()=>d,VC:()=>e,nb:()=>h,u_:()=>f,xt:()=>g})},71281:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspace/src/components/SiteHeader.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspace/src/components/SiteHeader.tsx","default")},76522:(a,b,c)=>{"use strict";c.d(b,{MB:()=>j,OC:()=>m,qQ:()=>k});var d=c(86802),e=c(82161),f=c(4410);let g="https://qslztdkptpklopyedkfd.supabase.co/",h="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFzbHp0ZGtwdHBrbG9weWVka2ZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM0MTYzMzksImV4cCI6MjA3ODk5MjMzOX0.et6RdF18ioinJKYNNTE0UVA5HvRH1YaXmA2DgRHLPWo";if(!g||!h)throw Error("NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY must be set to enable auth.");function i(){let a=async()=>await (0,d.UL)();return(0,f.createServerClient)(g,h,{cookies:{async get(b){let c=await a();return c.get(b)?.value},async set(b,c,d){(await a()).set({name:b,value:c,...d})},async remove(b,c){(await a()).set({name:b,value:"",...c,maxAge:0})}}})}function j(){return i()}async function k(){let a=await (0,d.UL)();console.log("[auth] cookies seen by server:",a.getAll?.()??"no cookies helper");let b=i(),{data:c,error:e}=await b.auth.getSession();return(console.log("[auth] getSession result:",{hasSession:!!c.session,email:c.session?.user?.email??null,error:e?.message??null}),e)?(console.error("[auth] getSession failed",e),null):c.session??null}class l extends Error{constructor(a="Authentication required"){super(a),this.name="UnauthorizedError"}}async function m(a){let b=await k();if(b)return b;throw a?.redirectTo&&(0,e.redirect)(a.redirectTo),new l(a?.message)}},84472:(a,b,c)=>{"use strict";c.d(b,{kZ:()=>e});var d=c(12831);async function e(a){if(!a)return null;try{let{data:b,error:c}=await d.w9.from("customers").select("*").eq("user_id",a).maybeSingle();if(c)return console.error("getCustomerByUserId: lookup failed",{userId:a,error:c}),null;return b??null}catch(b){return console.error("getCustomerByUserId: unexpected error",{userId:a,error:b}),null}}},91331:(a,b,c)=>{"use strict";c.d(b,{default:()=>k});var d=c(21124),e=c(3991),f=c.n(e),g=c(42378),h=c(32999);let i=[{label:"Capabilities",href:"/capabilities"},{label:"Resources",href:"/resources"}],j=[{label:"Customer portal",href:"/customer"},{label:"Supplier portal",href:"/supplier"}];function k(){let a=(0,g.usePathname)();return a?.startsWith("/customer")||a?.startsWith("/supplier")?null:(0,d.jsx)("header",{className:"sticky top-0 z-40 border-b border-slate-900/70 bg-neutral-950/90 backdrop-blur-md",children:(0,d.jsxs)("div",{className:"mx-auto grid w-full max-w-page grid-cols-1 gap-4 px-4 py-4 sm:px-6 md:grid-cols-[auto_minmax(0,1fr)_auto] lg:px-8",children:[(0,d.jsxs)(f(),{href:"/",className:"flex items-center gap-3 text-base font-semibold text-ink transition-colors hover:text-ink-soft","aria-label":"Zartman front door",children:[(0,d.jsx)("span",{className:"flex h-9 w-9 items-center justify-center rounded-2xl border border-emerald-400/50 bg-emerald-400/10 text-sm font-bold uppercase tracking-wide text-emerald-200",children:"Z"}),(0,d.jsxs)("div",{className:"flex flex-col leading-tight",children:[(0,d.jsx)("span",{children:"Zartman"}),(0,d.jsx)("span",{className:"text-xs font-normal uppercase tracking-[0.35em] text-ink-muted",children:"marketplace"})]})]}),(0,d.jsx)("nav",{className:"flex flex-wrap items-center justify-center gap-4 text-sm font-medium text-ink-soft md:justify-center",children:i.map(a=>(0,d.jsx)(f(),{href:a.href,className:"transition-colors hover:text-ink",children:a.label},a.href))}),(0,d.jsxs)("div",{className:"flex flex-wrap items-center justify-start gap-3 text-sm font-medium text-ink-soft md:justify-end",children:[j.map(a=>(0,d.jsx)(f(),{href:a.href,className:"rounded-full border border-transparent px-3 py-1.5 transition-colors hover:border-slate-800 hover:text-ink",children:a.label},a.href)),(0,d.jsx)(f(),{href:"/login",className:"rounded-full px-3 py-1.5 text-ink-soft transition-colors hover:text-ink",children:"Log in"}),(0,d.jsx)(f(),{href:"/quote",className:h.n4,children:"Get quote"})]})]})})}},95710:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>k,metadata:()=>j});var d=c(75338);c(61135);var e=c(65169),f=c.n(e);let g=[{title:"Customers",links:[{label:"Customer portal",href:"/customer"},{label:"Become a customer",href:"/customer/signup",description:"Create your workspace and send your first RFQ."}]},{title:"Suppliers",links:[{label:"Supplier portal",href:"/supplier"},{label:"Become a supplier",href:"/supplier/signup",description:"Create a supplier profile and get a magic link to finish onboarding."}]},{title:"Company",links:[{label:"About",href:"/about"},{label:"Contact",href:"/contact"},{label:"Privacy",href:"/privacy"}]}];function h(){return(0,d.jsx)("footer",{className:"border-t border-slate-900/70 bg-neutral-950/90",children:(0,d.jsxs)("div",{className:"mx-auto max-w-page px-4 py-12 sm:px-6 lg:px-8",children:[(0,d.jsx)("div",{className:"grid gap-8 sm:grid-cols-2 md:grid-cols-3",children:g.map(a=>(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("p",{className:"text-sm font-semibold uppercase tracking-wide text-ink",children:a.title}),(0,d.jsx)("ul",{className:"space-y-2 text-sm text-ink-soft",children:a.links.map(a=>(0,d.jsxs)("li",{className:"space-y-1",children:[(0,d.jsx)(f(),{href:a.href,className:"transition-colors hover:text-ink",children:a.label}),a.description?(0,d.jsx)("p",{className:"text-xs text-ink-muted",children:a.description}):null]},a.href))})]},a.title))}),(0,d.jsx)("div",{className:"mt-10 text-xs text-ink-muted",children:"Built for manufacturing teams navigating both customer demand and supplier capacity — one shared cockpit, no duct tape."})]})})}var i=c(71281);let j={title:"Zartman.io",description:"Manufacturing OS — quotes, messaging, suppliers"};function k({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:"bg-neutral-950 text-neutral-50 antialiased",children:(0,d.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,d.jsx)(i.default,{}),(0,d.jsx)("div",{className:"flex-1",children:a}),(0,d.jsx)(h,{})]})})})}},98351:(a,b,c)=>{"use strict";c.d(b,{D:()=>m,iS:()=>k,g1:()=>l,KF:()=>h,KP:()=>e,ZS:()=>g,_r:()=>s});var d=c(12831);async function e(a){let b=function(a){if("string"!=typeof a)return null;let b=a.trim().toLowerCase();return b.length>0?b:null}(a);if(!b)return null;try{let{data:a,error:c}=await d.w9.from("suppliers").select("*").eq("primary_email",b).maybeSingle();if(c)return console.error("loadSupplierProfile: supplier lookup failed",{email:b,error:c}),null;if(!a)return null;let[e,f]=await Promise.all([i(a.id),j(a.id)]);return{supplier:a,capabilities:e,documents:f}}catch(a){return console.error("loadSupplierProfile: unexpected error",{email:b,error:a}),null}}async function f(a){if(!a)return null;try{let{data:b,error:c}=await d.w9.from("suppliers").select("*").eq("id",a).maybeSingle();if(c)return console.error("loadSupplierById: lookup failed",{supplierId:a,error:c}),null;return b??null}catch(b){return console.error("loadSupplierById: unexpected error",{supplierId:a,error:b}),null}}async function g(a){let b=await h(a);if(!b)return null;let[c,d]=await Promise.all([i(b.id),j(b.id)]);return{supplier:b,capabilities:c,documents:d}}async function h(a){if(!a)return null;try{let{data:b,error:c}=await d.w9.from("suppliers").select("*").eq("user_id",a).maybeSingle();if(c)return console.error("loadSupplierByUserId: lookup failed",{userId:a,error:c}),null;return b??null}catch(b){return console.error("loadSupplierByUserId: unexpected error",{userId:a,error:b}),null}}async function i(a){if(!a)return[];try{let{data:b,error:c}=await d.w9.from("supplier_capabilities").select("*").eq("supplier_id",a).order("created_at",{ascending:!0});if(c)return console.error("listSupplierCapabilities: query failed",{supplierId:a,error:c}),[];return b??[]}catch(b){return console.error("listSupplierCapabilities: unexpected error",{supplierId:a,error:b}),[]}}async function j(a){if(!a)return[];try{let{data:b,error:c}=await d.w9.from("supplier_documents").select("*").eq("supplier_id",a).order("uploaded_at",{ascending:!1});if(c)return console.error("listSupplierDocuments: query failed",{supplierId:a,error:c}),[];return b??[]}catch(b){return console.error("listSupplierDocuments: unexpected error",{supplierId:a,error:b}),[]}}async function k(a){if(!a)return[];try{let{data:b,error:c}=await d.w9.from("supplier_bids").select("*").eq("quote_id",a).order("created_at",{ascending:!1});if(c)return console.error("listSupplierBidsForQuote: query failed",{quoteId:a,error:c}),[];return n(b??[])}catch(b){return console.error("listSupplierBidsForQuote: unexpected error",{quoteId:a,error:b}),[]}}async function l(a){if(!a)return[];try{let{data:b,error:c}=await d.w9.from("supplier_bids").select("*").eq("supplier_id",a).order("updated_at",{ascending:!1});if(c)return console.error("listSupplierBidsForSupplier: query failed",{supplierId:a,error:c}),[];return n(b??[])}catch(b){return console.error("listSupplierBidsForSupplier: unexpected error",{supplierId:a,error:b}),[]}}async function m(a,b){if(!a||!b)return null;try{let{data:c,error:e}=await d.w9.from("supplier_bids").select("*").eq("quote_id",a).eq("supplier_id",b).maybeSingle();if(e)return console.error("getSupplierBidForQuote: lookup failed",{quoteId:a,supplierId:b,error:e}),null;return c??null}catch(c){return console.error("getSupplierBidForQuote: unexpected error",{quoteId:a,supplierId:b,error:c}),null}}async function n(a){if(0===a.length)return[];let b=Array.from(new Set(a.map(a=>a.supplier_id).filter(Boolean))),[c,d]=await Promise.all([o(b),p(b)]),e=new Map;c.forEach(a=>e.set(a.id,a));let f=new Map;return d.forEach(a=>{let b=f.get(a.supplier_id)??[];(a.certifications??[]).filter(a=>"string"==typeof a&&a.trim().length>0).forEach(a=>{b.includes(a)||b.push(a)}),f.set(a.supplier_id,b)}),a.map(a=>({...a,supplier:e.get(a.supplier_id)??null,certifications:f.get(a.supplier_id)??[]}))}async function o(a){if(0===a.length)return[];let{data:b,error:c}=await d.w9.from("suppliers").select("*").in("id",a);return c?(console.error("selectSuppliersByIds: query failed",{supplierIds:a,error:c}),[]):b??[]}async function p(a){if(0===a.length)return[];let{data:b,error:c}=await d.w9.from("supplier_capabilities").select("*").in("supplier_id",a);return c?(console.error("selectCapabilitiesBySupplierIds: query failed",{supplierIds:a,error:c}),[]):b??[]}var q=c(3440);let r=["submitted","in_review","quoted"];async function s(a){let b=await f(a);if(!b)return[];let[c,d,e]=await Promise.all([i(b.id),w(b.primary_email),x(b.id)]),g=function(a){let b=new Set,c=new Set;return a.forEach(a=>{let d=t(a.process);d&&b.add(d),(a.materials??[]).forEach(a=>{let b=function(a){if("string"!=typeof a)return null;let b=a.trim().toLowerCase();return b.length>0?b:null}(a);b&&c.add(b)})}),{processes:b,materials:c}}(c);if(0===g.processes.size)return[];let h=new Set;d.forEach(a=>{a?.quote_id&&h.add(a.quote_id)}),e.forEach(a=>{a?.quote_id&&h.add(a.quote_id)});let j=b.verified,k=await u();if(0===k.length)return[];let l=await v(k),m=function(a){let b=0,c=[];a.assignmentCount<=2?(b+=1,c.push("Boosted because this supplier hasn’t been overexposed yet.")):a.assignmentCount>=8&&(b-=.5,c.push("Slight penalty to avoid routing everything to the same shop."));let d=a.recentBidOutcomes.filter(a=>{if(!a.status||"accepted"===a.status)return!1;let b=Date.parse(a.updated_at??"");return!Number.isNaN(b)&&(Date.now()-b)/864e5<=30}).length;return d>0&&(b+=Math.min(1.2,.3*d),c.push("Extra weight because they’ve been responding recently without being selected.")),0===a.recentBidOutcomes.length&&(b+=.4,c.push("New to bidding — giving them a gentle nudge into rotation.")),function(a){if(!a)return!1;let b=Date.parse(a);return!Number.isNaN(b)&&(Date.now()-b)/864e5<=45}(a.supplierCreatedAt)&&(b+=.8,c.push("Recently onboarded supplier gets a temporary boost.")),{modifier:b,reasons:c}}({assignmentCount:d.length,recentBidOutcomes:e,supplierCreatedAt:b.created_at}),n=[];for(let a of k){let b=a.upload_id?l.get(a.upload_id):null,c=b?.manufacturing_process??null,d=t(c);if(!(d&&function(a,b){if(b.has(a))return!0;for(let c of b)if(a.includes(c)||c.includes(a))return!0;return!1}(d,g.processes)))continue;let f=a.id,i=j||!!f&&h.has(f);if(!i)continue;let k=e.find(a=>a.quote_id===f);if(!(0,q.z1)("supplier",{status:a.status,existingBidStatus:k?.status??null,accessGranted:i}))continue;let o=function(a,b){if(!a||0===b.size)return[];let c=[a.notes??"",a.rfq_reason??""].join(" ").toLowerCase(),d=[];return b.forEach(a=>{0!==a.length&&c.includes(a)&&d.push(a)}),d}(b,g.materials),p=function({createdAt:a,materialMatches:b}){let c;if(c=1+.5*b.length,a){let b=Date.parse(a);Number.isNaN(b)||(c+=Math.max(0,30-(Date.now()-b)/864e5)/10)}return c}({createdAt:a.created_at,materialMatches:o})+m.modifier;if(n.push({quoteId:f,quote:a,processHint:c,materialMatches:o,score:p,createdAt:a.created_at??null,quantityHint:b?.quantity??null,fairness:m.reasons.length>0?m:void 0}),n.length>=20)break}return n.sort((a,b)=>b.score-a.score)}function t(a){if("string"!=typeof a)return null;let b=a.trim().toLowerCase();return b.length>0?b:null}async function u(){try{let{data:a,error:b}=await d.w9.from("quotes_with_uploads").select("id,upload_id,customer_name,email,company,status,price,currency,created_at,updated_at,target_date,file_name,assigned_supplier_email,assigned_supplier_name,internal_notes,dfm_notes").in("status",r).order("created_at",{ascending:!1}).limit(50);if(b)return console.error("matchQuotesToSupplier: quote query failed",{error:b}),[];return a??[]}catch(a){return console.error("matchQuotesToSupplier: unexpected quote error",{error:a}),[]}}async function v(a){let b=Array.from(new Set(a.map(a=>a.upload_id).filter(a=>"string"==typeof a&&a.length>0)));if(0===b.length)return new Map;try{let{data:a,error:c}=await d.w9.from("uploads").select("id,manufacturing_process,quantity,rfq_reason,notes").in("id",b);if(c)return console.error("matchQuotesToSupplier: upload query failed",{error:c}),new Map;let e=new Map;return(a??[]).forEach(a=>{a?.id&&e.set(a.id,a)}),e}catch(a){return console.error("matchQuotesToSupplier: unexpected upload error",{error:a}),new Map}}async function w(a){if(!a)return[];try{let{data:b,error:c}=await d.w9.from("quote_suppliers").select("quote_id").eq("supplier_email",a);if(c)return console.error("matchQuotesToSupplier: assignment query failed",{email:a,error:c}),[];return b??[]}catch(b){return console.error("matchQuotesToSupplier: assignment unexpected error",{email:a,error:b}),[]}}async function x(a){if(!a)return[];try{let{data:b,error:c}=await d.w9.from("supplier_bids").select("quote_id,status,updated_at").eq("supplier_id",a);if(c)return console.error("matchQuotesToSupplier: bid query failed",{supplierId:a,error:c}),[];return b??[]}catch(b){return console.error("matchQuotesToSupplier: bid unexpected error",{supplierId:a,error:b}),[]}}}};