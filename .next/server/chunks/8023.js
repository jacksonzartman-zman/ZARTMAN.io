"use strict";exports.id=8023,exports.ids=[8023],exports.modules={897:(a,b,c)=>{c.d(b,{j1:()=>g,z1:()=>h});var d=c(65844),e=c(23867);let f=new Set(e.Hk);function g(a,b,c){let e=(0,d.u_)(b);return!!e&&!!c&&("customer"===a?function(a,b){if(i([b.email,b.customer_email,...b.customerEmails??[],...b.allowedCustomerEmails??[]]).has(a))return!0;let c=a.split("@")[1];return!!c&&(function(a){let b=new Set;return a.forEach(a=>{if(!a)return;let c=a.trim().toLowerCase().replace(/^@/,"");c.includes(".")&&b.add(c)}),b})([b.customerDomain,b.orgDomain,...b.allowedCustomerDomains??[]]).has(c)}(e,c):"supplier"===a&&function(a,b){if(i([b.assigned_supplier_email,b.assignedSupplierEmail,...b.allowedSupplierEmails??[],...j(b.assignments),...j(b.supplierAssignments)]).has(a))return!0;let c=i(b.supplierContext?.verifiedEmails??[]);if(b.supplierContext?.verifiedAccess&&c.has(a))return!0;let e=(0,d.u_)(b.email??null);return!!e&&e===a}(e,c))}function h(a,b){var c;if("supplier"!==a||!b||!1===b.accessGranted||!1===b.allowBids||!0===b.bidLocked)return!1;let d=(0,e.Ao)(b.status);return!!f.has(d)&&"accepted"!==((c=b.existingBidStatus)?c.trim().toLowerCase():null)}function i(a){let b=new Set;return a.forEach(a=>{let c=(0,d.u_)(a??null);c&&b.add(c)}),b}function j(a){return a&&0!==a.length?a.map(a=>a?.supplier_email??a?.email??null):[]}},23696:(a,b,c)=>{c.d(b,{Ef:()=>e}),"true"===process.env.SUPPLIER_ASSIGNMENTS_ENABLED||process.env.NEXT_PUBLIC_SUPPLIER_ASSIGNMENTS_ENABLED;let d="true"===process.env.SUPPLIER_APPROVALS_ENABLED||"true"===process.env.NEXT_PUBLIC_SUPPLIER_APPROVALS_ENABLED;function e(){return d}},48023:(a,b,c)=>{c.d(b,{fd:()=>d.fd,jp:()=>d.jp,WP:()=>d.WP,m9:()=>d.m9,KP:()=>d.KP,ZS:()=>d.ZS,G_:()=>d.G_,rs:()=>d.rs});var d=c(31722);c(71564),c(50904),c(897),c(23696),c(23867),c(15656)},65844:(a,b,c)=>{c.d(b,{u_:()=>d});function d(a){if(!a)return null;let b=a.trim().toLowerCase();return b.length>0?b:null}},71564:(a,b,c)=>{c.d(b,{Sy:()=>h});var d=c(50904),e=c(15656);c(31722),c(23696),c(52453),c(23867),c(27152),[...c(85150).L];let f="Bids are not available in this environment.",g="We had trouble loading bids.";async function h(a,b){if(!a||!b)return{ok:!1,data:null,error:"Supplier and quote are required."};try{var c;let{data:h,error:i}=await d.w9.from("supplier_bids").select("id,quote_id,supplier_id,unit_price,currency,lead_time_days,notes,status,created_at,updated_at").eq("quote_id",b).eq("supplier_id",a).maybeSingle();if(i){let c=(0,e.H)(i);if((0,e.uW)(i))return console.warn("[bids] detail missing schema",{supplierId:a,quoteId:b,error:c}),{ok:!1,data:null,error:f};return console.error("[bids] detail query failed",{supplierId:a,quoteId:b,error:c}),{ok:!1,data:null,error:g}}return{ok:!0,data:(c=h)?{id:c.id,quote_id:c.quote_id,supplier_id:c.supplier_id,amount:function(a){let b="string"==typeof a?Number(a):a;return"number"==typeof b&&Number.isFinite(b)?b:null}(c.unit_price),currency:c.currency??null,lead_time_days:"number"==typeof c.lead_time_days&&Number.isFinite(c.lead_time_days)?c.lead_time_days:null,notes:c.notes??null,status:c.status??null,created_at:c.created_at??null,updated_at:c.updated_at??null}:null,error:null}}catch(d){let c=(0,e.H)(d);if((0,e.uW)(d))return console.warn("[bids] detail missing schema",{supplierId:a,quoteId:b,error:c}),{ok:!1,data:null,error:f};return console.error("[bids] detail crashed",{supplierId:a,quoteId:b,error:c??d}),{ok:!1,data:null,error:g}}}},85150:(a,b,c)=>{c.d(b,{L:()=>d});let d=["id","upload_id","customer_name","email","company","status","price","currency","created_at","updated_at","target_date","file_name"]}};